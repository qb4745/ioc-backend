## Sprint 3 ‚Äì Sprint Backlog (El Poder de la Gobernanza)

## Metadata del Sprint

**Proyecto:** Plataforma IOC - Sistema de Business Intelligence
**Sprint:** Sprint 3 - El Poder de la Gobernanza
**Per√≠odo:** 2025-10-27 / 2025-11-22
**Duraci√≥n:** 4 semanas (20 d√≠as h√°biles)
**Equipo:**

- **Product Owner:** Boris Arriagada
- **Scrum Master:** Jaime Vicencio
- **Development Team:** Boris Arriagada (Backend/Frontend), Jaime Vicencio (Frontend/Backend)

**Festivos/No laborables:** Ninguno durante este per√≠odo

**Velocity del Equipo:** ~10 SP/semana (basado en Sprint 2: 21 SP en 3 semanas = ~7 SP/semana ajustado a 10 SP/semana con mejora continua)
**Capacidad Te√≥rica del Sprint:** 40 SP (10 SP/semana √ó 4 semanas)
**Capacidad Comprometida:** 37 SP (92.5% de capacidad - incluye buffer 7.5%)
**Buffer para Impedimentos:** 3 SP (~7.5% reservado para ajustes finales y refinamiento)

**Justificaci√≥n del Buffer Reducido:**

- Equipo en fase de alta madurez tras 2 sprints exitosos (87% de predictibilidad)
- Stack tecnol√≥gico totalmente conocido y dominado
- No hay dependencias externas cr√≠ticas en este sprint
- √öltima fase del MVP - foco en refinamiento y completitud

### üßÆ F√≥rmulas de Validaci√≥n de Capacidad

**Relaciones Matem√°ticas Obligatorias:**

$$
\text{Capacidad Te√≥rica (SP)} = 10 \text{ SP/semana} \times 4 \text{ semanas} = 40 \text{ SP}
$$

$$
\text{Buffer (\%)} = \frac{3 \text{ SP}}{40 \text{ SP}} \times 100 = 7.5\%
$$

$$
\text{Capacidad Comprometida (SP)} = 40 \text{ SP} - 3 \text{ SP} = 37 \text{ SP}
$$

$$
\sum \text{SP de Historias} = 8 + 8 + 8 + 13 = 37 \text{ SP} \leq 37 \text{ SP} \quad ‚úÖ
$$

**Validaci√≥n Exitosa:**

- Velocity ajustada: 10 SP/semana (considerando mejora de rendimiento del equipo)
- Duraci√≥n: 4 semanas
- Capacidad Te√≥rica: 40 SP
- Buffer: 7.5% ‚Üí 3 SP (equipo maduro, bajo riesgo)
- Capacidad Comprometida: 37 SP
- Historias: IOC-002 (8 SP) + IOC-004 (8 SP) + IOC-019 (8 SP) + IOC-020 (13 SP) = 37 SP
- ‚úÖ Validaci√≥n: 37 SP = 37 SP (Capacidad √≥ptima utilizada)

***

## üéØ SPRINT GOAL

**"Completar el MVP otorgando al Administrador control total sobre la validaci√≥n de datos, gesti√≥n de usuarios, roles, permisos y administraci√≥n completa del contenido anal√≠tico (gr√°ficos y disposici√≥n de dashboards), estableciendo una plataforma de BI completamente gobernada y lista para producci√≥n."**

Al finalizar este Sprint, los administradores podr√°n:

- Validar autom√°ticamente los datos cargados con gesti√≥n de errores y cuarentena de registros problem√°ticos
- Crear, modificar y eliminar usuarios con asignaci√≥n granular de roles y permisos mediante RBAC completo
- Administrar el cat√°logo completo de gr√°ficos y visualizaciones disponibles en la plataforma
- Dise√±ar y personalizar la disposici√≥n del dashboard principal controlando qu√© KPIs y gr√°ficos son visibles
- Tener auditor√≠a completa de todas las operaciones administrativas con trazabilidad de cambios

**Valor de Negocio:** Completar el 100% del MVP Core, habilitando gobernanza total de datos y contenido anal√≠tico, asegurando seguridad empresarial y cumpliendo con los requisitos de lanzamiento para Q4-2025.

üìå **Componentes Oficiales del Sprint Backlog (Scrum Guide 2020):** Sprint Goal + Secci√≥n de Historias Comprometidas + Checklist de Tareas T√©cnicas

***

## Historias Comprometidas

### üéØ Sistema de Priorizaci√≥n Unificado

**Para Historias de Usuario (MoSCoW):**

- **Must Have (M):** Requerimiento cr√≠tico para el Sprint Goal - bloquea release si no se completa
- **Should Have (S):** Importante pero no bloqueante - se puede diferir al siguiente sprint
- **Could Have (C):** Deseable pero opcional - solo si sobra capacidad tras completar M y S
- **Won't Have (W):** Expl√≠citamente excluido de este sprint

***

| ID      | T√≠tulo                                                             | Tipo                | Feature             | Prioridad     | SP  | Asignado | Estado       |
|:------- |:------------------------------------------------------------------ |:------------------- |:------------------- |:------------- |:---:|:-------- |:------------ |
| IOC-002 | Como administrador, quiero validar datos cargados...               | Historia de Usuario | Validaci√≥n de Datos | **Must Have** | 8   | Boris    | ‚úÖ Completado |
| IOC-004 | Como administrador, quiero gestionar usuarios y roles...           | Historia de Usuario | Gesti√≥n de Usuarios | **Must Have** | 8   | Jaime    | ‚úÖ Completado |
| IOC-019 | Como administrador, quiero gestionar gr√°ficos del dashboard...     | Historia de Usuario | Gesti√≥n de Gr√°ficos | **Must Have** | 8   | Boris    | ‚úÖ Completado |
| IOC-020 | Como administrador, quiero dise√±ar la disposici√≥n del dashboard... | Historia de Usuario | Dise√±o de Dashboard | **Must Have** | 13  | Jaime    | ‚úÖ Completado |

**Total Story Points Comprometidos:** 37 SP

**Validaci√≥n de Capacidad:**

- ‚úÖ Suma de SP (37) = Capacidad Comprometida (37 SP)
- ‚úÖ Todas las historias Must Have caben en la capacidad
- ‚úÖ Balance adecuado: 100% Must Have (sprint final del MVP)

***

## Criterios de Aceptaci√≥n Detallados

### **IOC-002: Como administrador, quiero validar datos cargados autom√°ticamente para asegurar la calidad y precisi√≥n en los datos**

**Contexto:** La validaci√≥n autom√°tica de datos es cr√≠tica para mantener la integridad del sistema anal√≠tico. Sin validaci√≥n robusta, datos err√≥neos contaminar√≠an los dashboards y generar√≠an decisiones incorrectas.

**Criterios de Aceptaci√≥n:**

‚úÖ **Validaci√≥n exitosa de datos correctos**

- **Dado** un archivo CSV cargado con 1000 registros de producci√≥n correctamente formateados (fechas v√°lidas, SKUs existentes, cantidades positivas)
- **Cuando** el sistema ejecuta la validaci√≥n autom√°tica del job ETL
- **Entonces** los 1000 registros son insertados en `fact_production`, el job_status cambia a "COMPLETED", y se muestra mensaje "Validaci√≥n exitosa: 1000 registros procesados, 0 errores" en menos de 30 segundos

‚úÖ **Detecci√≥n y cuarentena de registros err√≥neos**

- **Dado** un archivo CSV con 950 registros v√°lidos y 50 registros con errores (fechas futuras, SKUs inexistentes, cantidades negativas, campos vac√≠os obligatorios)
- **Cuando** el sistema ejecuta la validaci√≥n autom√°tica
- **Entonces** los 950 registros v√°lidos son insertados en `fact_production`, los 50 registros problem√°ticos son almacenados en `quarantined_records` con detalles espec√≠ficos del error, el job_status es "COMPLETED_WITH_WARNINGS", y se genera reporte descargable con los errores

‚úÖ **Detecci√≥n de registros duplicados por hash**

- **Dado** un archivo CSV que contiene 100 registros, de los cuales 20 ya existen en la base de datos (mismo `file_hash` o registros con misma fecha_contabilizacion + maquina + documento)
- **Cuando** el sistema ejecuta la validaci√≥n y detecta duplicados
- **Entonces** solo los 80 registros √∫nicos son insertados, los 20 duplicados son rechazados con mensaje "Registro duplicado - ya existe", el job_status es "COMPLETED_WITH_WARNINGS", y el reporte muestra "80 insertados, 20 duplicados omitidos"

‚úÖ **Validaci√≥n manual trigger en caso de fallo masivo**

- **Dado** un archivo CSV donde m√°s del 30% de registros tienen errores cr√≠ticos (formato completamente incorrecto, encodingproblems, columnas faltantes)
- **Cuando** el sistema detecta un ratio de error > 30%
- **Entonces** el job_status cambia a "FAILED", se env√≠a alerta al administrador v√≠a email y notificaci√≥n in-app indicando "Validaci√≥n detenida: 35% de errores cr√≠ticos detectados. Se requiere revisi√≥n manual del archivo", y no se insertan registros hasta correcci√≥n manual

‚úÖ **Auditor√≠a completa de validaciones**

- **Dado** cualquier proceso de validaci√≥n ejecutado (exitoso o con errores)
- **Cuando** el administrador accede a la tabla `etl_jobs`
- **Entonces** cada job tiene registrado: job_id UUID √∫nico, file_name, file_hash, user_id del cargador, min_date y max_date de los datos, status (COMPLETED/COMPLETED_WITH_WARNINGS/FAILED), details con resumen JSON, created_at y finished_at timestamps exactos

***

### **IOC-004: Como administrador, quiero gestionar usuarios y roles para controlar el acceso y proteger la informaci√≥n**

**Contexto:** El sistema RBAC (Role-Based Access Control) es fundamental para garantizar que cada usuario tenga exactamente los permisos necesarios seg√∫n su funci√≥n, protegiendo informaci√≥n sensible y cumpliendo con pol√≠ticas de seguridad empresarial.

**Criterios de Aceptaci√≥n:**

‚úÖ **Creaci√≥n exitosa de usuario con roles asignados**

- **Dado** un administrador autenticado en el panel de gesti√≥n de usuarios (`/admin/dashboard`)
- **Cuando** crea un nuevo usuario con datos v√°lidos (email √∫nico, nombre completo, planta asignada, centro de costo) y selecciona roles "ROLE_USER" y rol personalizado "Supervisor L√≠nea 1"
- **Entonces** el usuario es creado en `app_users` con `supabase_user_id` vinculado, los roles son asignados en `user_roles` con `assigned_at` timestamp y `assigned_by_user_id` del administrador, se env√≠a email de bienvenida con credenciales temporales, y aparece en la tabla de usuarios con estado "Activo" en menos de 2 segundos

‚úÖ **Modificaci√≥n de usuario existente con actualizaci√≥n de roles**

- **Dado** un usuario existente "Juan P√©rez" con rol "ROLE_USER"
- **Cuando** el administrador actualiza su informaci√≥n (cambio de planta, asignaci√≥n de nuevo rol "ROLE_ADMIN", modificaci√≥n de centro de costo)
- **Entonces** los datos en `app_users` son actualizados con `updated_at` timestamp, los roles nuevos son a√±adidos en `user_roles` (sin eliminar los anteriores a menos que se deseleccionen expl√≠citamente), se registra auditor√≠a del cambio indicando qu√© campos fueron modificados, y el usuario puede acceder inmediatamente con sus nuevos permisos (sin necesidad de logout/login)

‚úÖ **Desactivaci√≥n y eliminaci√≥n l√≥gica de usuario**

- **Dado** un usuario "Mar√≠a Gonz√°lez" que ya no trabaja en la empresa
- **Cuando** el administrador hace clic en "Desactivar Usuario" y confirma la acci√≥n
- **Entonces** el campo `is_active` cambia a `false`, el campo `deleted_at` se establece con timestamp actual (soft delete), el usuario no puede iniciar sesi√≥n mostrando mensaje "Usuario desactivado. Contacte al administrador", pero sus registros hist√≥ricos (uploads, auditor√≠a) se mantienen intactos para trazabilidad, y puede ser reactivado posteriormente sin p√©rdida de datos

‚úÖ **Asignaci√≥n granular de roles con permisos espec√≠ficos**

- **Dado** un administrador creando un rol personalizado "Analista Avanzado"
- **Cuando** asigna permisos espec√≠ficos desde la lista de `permissions` disponibles (ej: "dashboard:view", "reports:export", "filters:advanced", pero NO "users:manage")
- **Entonces** el rol es creado en `roles`, los permisos son vinculados en `role_permissions`, cualquier usuario con este rol puede ejecutar solo las acciones permitidas (puede ver dashboards y exportar, pero recibe error 403 al intentar gestionar usuarios), y el sistema valida permisos en cada request mediante `@PreAuthorize` en el backend

‚úÖ **Listado y b√∫squeda de usuarios con filtros**

- **Dado** un administrador en la vista de gesti√≥n de usuarios con 150 usuarios en el sistema
- **Cuando** utiliza filtros (por planta, por rol, por estado activo/inactivo, b√∫squeda por nombre/email) y paginaci√≥n (20 usuarios por p√°gina)
- **Entonces** la tabla muestra solo los usuarios que cumplen los criterios seleccionados, la b√∫squeda es case-insensitive y funciona con b√∫squedas parciales (ej: "juan" encuentra "Juan P√©rez" y "Juana L√≥pez"), la paginaci√≥n funciona correctamente mostrando total de resultados, y la respuesta es en menos de 1 segundo incluso con filtros complejos

***

### **IOC-019: Como administrador, quiero crear y gestionar las definiciones de los gr√°ficos para controlar qu√© visualizaciones est√°n disponibles en los dashboards**

**Contexto:** La gesti√≥n del cat√°logo de gr√°ficos permite al administrador controlar centralizadamente qu√© visualizaciones est√°n disponibles, facilitando la personalizaci√≥n de dashboards sin depender de cambios en c√≥digo.

**Criterios de Aceptaci√≥n:**

‚úÖ **Creaci√≥n exitosa de nueva definici√≥n de gr√°fico**

- **Dado** un administrador autenticado accediendo al m√≥dulo de gesti√≥n de gr√°ficos (`/admin/contenido-analitico`)
- **Cuando** crea un nuevo gr√°fico con datos v√°lidos (t√≠tulo: "Producci√≥n por L√≠nea", tipo: "bar_chart", descripci√≥n, dashboard_id de Metabase: 42, query_id si aplica, configuraci√≥n JSON con opciones de visualizaci√≥n)
- **Entonces** el gr√°fico es almacenado en tabla `chart_definitions` con UUID generado, aparece inmediatamente en la lista de gr√°ficos disponibles ordenados alfab√©ticamente, se registra auditor√≠a con `created_by` y `created_at`, y el gr√°fico est√° disponible para ser a√±adido a dashboards en menos de 2 segundos

‚úÖ **Modificaci√≥n de gr√°fico existente con versionado**

- **Dado** un gr√°fico existente "Eficiencia por Turno" con configuraci√≥n actual
- **Cuando** el administrador modifica su t√≠tulo, actualiza la descripci√≥n, cambia el tipo de gr√°fico de "line" a "area", o ajusta la configuraci√≥n JSON (colores, ejes, l√≠mites)
- **Entonces** los cambios son guardados en `chart_definitions` con `updated_at` timestamp, se crea registro de auditor√≠a con los campos modificados y valores anteriores/nuevos, todos los dashboards que usan este gr√°fico reflejan los cambios inmediatamente (o en el pr√≥ximo refresh del iframe de Metabase, m√°ximo 60 segundos), y se muestra confirmaci√≥n "Gr√°fico actualizado exitosamente"

‚úÖ **Eliminaci√≥n de gr√°fico con validaci√≥n de dependencias**

- **Dado** un gr√°fico "KPI de Rechazos" que est√° siendo usado en 3 dashboards activos
- **Cuando** el administrador intenta eliminarlo
- **Entonces** el sistema muestra mensaje de advertencia: "Este gr√°fico est√° siendo usado en 3 dashboards: [Dashboard Gerencial, Dashboard Operativo, Dashboard Calidad]. ¬øDesea continuar? Los dashboards mostrar√°n un placeholder.", requiere confirmaci√≥n expl√≠cita, al confirmar el gr√°fico es marcado como `is_deleted=true` (soft delete) y los dashboards afectados muestran mensaje "Gr√°fico no disponible" en lugar del contenido

‚úÖ **Validaci√≥n de campos obligatorios y formato**

- **Dado** un administrador intentando crear/modificar un gr√°fico
- **Cuando** omite campos obligatorios (t√≠tulo vac√≠o, tipo de gr√°fico no seleccionado) o ingresa datos inv√°lidos (dashboard_id inexistente, configuraci√≥n JSON mal formateada)
- **Entonces** el sistema bloquea el guardado, muestra mensajes de error espec√≠ficos junto a cada campo problem√°tico ("T√≠tulo es obligatorio", "El ID de dashboard no existe en Metabase", "JSON de configuraci√≥n inv√°lido: se esperaba un objeto"), resalta los campos en rojo, y sugiere correcciones cuando sea posible

‚úÖ **Previsualizaci√≥n de gr√°fico antes de guardar**

- **Dado** un administrador configurando un nuevo gr√°fico con dashboard_id y par√°metros v√°lidos
- **Cuando** hace clic en "Previsualizar"
- **Entonces** el sistema genera un signed_url temporal de Metabase para ese dashboard/gr√°fico espec√≠fico, muestra una previsualizaci√≥n en un modal con el gr√°fico renderizado en tiempo real (con datos actuales), permite ajustar par√°metros y volver a previsualizar, y el signed_url tiene TTL de 5 minutos para seguridad

***

### **IOC-020: Como administrador, quiero dise√±ar la disposici√≥n del dashboard principal para controlar qu√© KPIs y gr√°ficos son visibles para los usuarios finales**

**Contexto:** La personalizaci√≥n de la disposici√≥n del dashboard permite al administrador crear experiencias de usuario optimizadas seg√∫n roles y necesidades de negocio, sin requerir desarrollo de c√≥digo.

**Criterios de Aceptaci√≥n:**

‚úÖ **Acceso a interfaz de dise√±o de dashboard con grid interactivo**

- **Dado** un administrador autenticado accediendo a `/admin/contenido-analitico/dise√±o-dashboard`
- **Cuando** la vista carga por primera vez
- **Entonces** se muestra una cuadr√≠cula interactiva (grid 12 columnas responsive) con la disposici√≥n actual del dashboard (si existe), un panel lateral con lista de componentes disponibles (gr√°ficos, KPIs, filtros) arrastrables con drag-and-drop, y controles para guardar/descartar cambios, todo cargado en menos de 2 segundos

‚úÖ **A√±adir componentes al dashboard mediante drag-and-drop**

- **Dado** un administrador en la interfaz de dise√±o visualizando el grid vac√≠o o con componentes existentes
- **Cuando** arrastra un componente desde el panel lateral (ej: "Gr√°fico de Producci√≥n por L√≠nea") y lo suelta en una posici√≥n espec√≠fica del grid (fila 1, columna 1-6)
- **Entonces** el componente aparece en esa posici√≥n con un contenedor visual (borde, header con t√≠tulo del gr√°fico), permite redimensionamiento mediante handles en las esquinas, muestra previsualizaci√≥n del contenido (con datos reales o placeholder), y se puede reposicionar a otra celda del grid sin recarga de p√°gina

‚úÖ **Modificar tama√±o y posici√≥n de componentes existentes**

- **Dado** un dashboard con 5 componentes ya colocados (2 KPIs, 3 gr√°ficos)
- **Cuando** el administrador redimensiona un gr√°fico (ampl√≠a de 6 columnas a 12 columnas de ancho), mueve un KPI de la fila 1 a la fila 3, o intercambia posiciones de dos componentes
- **Entonces** el grid actualiza visualmente la nueva disposici√≥n en tiempo real con animaciones suaves, otros componentes se reposicionan autom√°ticamente para evitar solapamientos (auto-layout), se respeta el sistema de columnas responsive (componentes se ajustan en mobile/tablet), y los cambios quedan en estado "borrador" hasta que se guarden expl√≠citamente

‚úÖ **Eliminar componentes del dashboard**

- **Dado** un componente "KPI de Eficiencia" colocado en el dashboard
- **Cuando** el administrador hace clic en el icono de eliminar (X) del componente y confirma la acci√≥n
- **Entonces** el componente es removido del grid con animaci√≥n de fade-out, otros componentes se reajustan para llenar el espacio vac√≠o (opcional), el componente vuelve a aparecer en el panel lateral de componentes disponibles para ser a√±adido nuevamente, y el cambio queda en estado "borrador" sin afectar la vista p√∫blica hasta guardar

‚úÖ **Guardado y publicaci√≥n de la nueva disposici√≥n**

- **Dado** un administrador que ha realizado cambios en la disposici√≥n del dashboard (a√±adido, movido, redimensionado, eliminado componentes)
- **Cuando** hace clic en "Guardar y Publicar" y confirma la acci√≥n
- **Entonces** la configuraci√≥n completa del layout es serializada a JSON con estructura `{ components: [ { id, type, position: { row, col, width, height }, config } ] }`, guardada en tabla `dashboard_layouts` con `version` incrementado y `published_at` timestamp, la nueva disposici√≥n se convierte inmediatamente en la vista por defecto para todos los usuarios seg√∫n sus roles (usuarios con rol "Gerente" ven el dashboard gerencial configurado), se muestra confirmaci√≥n "Dashboard publicado exitosamente. Los cambios son visibles para los usuarios.", y se crea snapshot de la versi√≥n anterior para rollback si es necesario

‚úÖ **Previsualizaci√≥n por rol antes de publicar**

- **Dado** un administrador que ha configurado una disposici√≥n de dashboard personalizada
- **Cuando** selecciona "Previsualizar como [Rol]" desde un dropdown (opciones: ROLE_ADMIN, ROLE_USER, Supervisor, Analista)
- **Entonces** el sistema renderiza una vista modal simulando exactamente c√≥mo ese rol ver√° el dashboard (aplicando permisos de visualizaci√≥n, filtros por defecto, componentes ocultos seg√∫n permisos), permite navegar e interactuar con la previsualizaci√≥n, muestra advertencias si alg√∫n componente no es visible para ese rol ("Este gr√°fico requiere permiso 'analytics:advanced' que el rol USER no posee"), y permite ajustar la configuraci√≥n antes de publicar

***

## Checklist de Tareas T√©cnicas

| N¬∫  | ID           | Capa          | Historia | Responsable | Descripci√≥n                                                                                                                                                                                                                                                                                                                                  | Estado       |
|:---:|:------------ |:------------- |:-------- |:----------- |:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |:------------ |
| 1   | BE-TASK-40   | Backend       | IOC-002  | Boris       | Implementar `DataValidationService.java` con m√©todos para validar cada tipo de campo (fechas, SKUs, cantidades, maquinistas) usando Bean Validation y reglas de negocio espec√≠ficas                                                                                                                                                          | ‚úÖ Completado |
| 2   | BE-TASK-41   | Backend       | IOC-002  | Boris       | Modificar `EtlProcessingService.java` para integrar validaci√≥n autom√°tica: ejecutar `DataValidationService` en cada registro antes de inserci√≥n, capturar errores y guardar en `QuarantinedRecord`                                                                                                                                           | ‚úÖ Completado |
| 3   | BE-TASK-42   | Backend       | IOC-002  | Boris       | Crear `QuarantineRepository.java` y entidad `QuarantinedRecord` con campos: id, job_id FK, file_name, line_number, raw_line TEXT, error_details JSON, created_at                                                                                                                                                                             | ‚úÖ Completado |
| 4   | BE-TASK-43   | Backend       | IOC-002  | Boris       | Implementar detecci√≥n de duplicados en `EtlProcessingService`: verificar `file_hash` en `etl_jobs`, y validar registros duplicados por clave compuesta (fecha + maquina + documento) usando query EXISTS                                                                                                                                     | ‚úÖ Completado |
| 5   | BE-TASK-44   | Backend       | IOC-002  | Boris       | A√±adir l√≥gica de threshold de errores: si `error_count / total_records > 0.30`, cambiar `job_status` a "FAILED" y enviar alerta mediante `NotificationService` (email + in-app)                                                                                                                                                              | ‚úÖ Completado |
| 6   | BE-TASK-45   | Backend       | IOC-002  | Boris       | Crear endpoint GET `/api/etl/jobs/{jobId}/quarantine` en `EtlController` para obtener registros en cuarentena con paginaci√≥n, filtros por tipo de error, y exportaci√≥n a CSV                                                                                                                                                                 | ‚úÖ Completado |
| 7   | BE-TASK-46   | Backend       | IOC-002  | Boris       | Implementar generaci√≥n de reporte de validaci√≥n: `ValidationReportService.java` que crea PDF/Excel con resumen de validaci√≥n (total registros, exitosos, errores, duplicados) y detalle de errores usando Apache POI                                                                                                                         | ‚úÖ Completado |
| 8   | FE-TASK-31   | Frontend      | IOC-002  | Boris       | Crear componente `ValidationReportModal.tsx` para mostrar resumen de validaci√≥n post-carga con m√©tricas (√©xito, errores, duplicados), gr√°fico de pastel (success/warning/error), y bot√≥n de descarga de reporte detallado                                                                                                                    | ‚úÖ Completado |
| 9   | FE-TASK-32   | Frontend      | IOC-002  | Boris       | Modificar `DataIngestionPage.tsx` para mostrar indicador de validaci√≥n en progreso durante polling, actualizar `UploadHistoryTable` con columna "Errores" que muestra count de registros en cuarentena con badge rojo                                                                                                                        | ‚úÖ Completado |
| 10  | FE-TASK-33   | Frontend      | IOC-002  | Boris       | Implementar `QuarantineDetailsModal.tsx` para mostrar tabla paginada de registros en cuarentena con columnas: l√≠nea, contenido original, error espec√≠fico, y bot√≥n "Exportar Errores"                                                                                                                                                        | ‚úÖ Completado |
| 11  | TEST-TASK-05 | Testing       | IOC-002  | Boris       | Escribir tests unitarios para `DataValidationService`: casos v√°lidos, fechas inv√°lidas (futuras, formatos incorrectos), SKUs inexistentes, cantidades negativas, campos nulos                                                                                                                                                                | ‚úÖ Completado |
| 12  | TEST-TASK-06 | Testing       | IOC-002  | Boris       | Escribir tests de integraci√≥n para flujo completo de validaci√≥n: archivo 100% v√°lido ‚Üí COMPLETED, archivo 20% errores ‚Üí COMPLETED_WITH_WARNINGS, archivo 40% errores ‚Üí FAILED                                                                                                                                                                | ‚úÖ Completado |
| 13  | BE-TASK-47   | Backend       | IOC-004  | Jaime       | Crear `AdminUserController.java` con endpoints CRUD: POST `/api/v1/admin/users` (crear), GET `/api/v1/admin/users` (listar con paginaci√≥n y filtros), GET `/api/v1/admin/users/{id}`, PUT `/api/v1/admin/users/{id}`, DELETE `/api/v1/admin/users/{id}` (soft delete)                                                                        | ‚úÖ Completado |
| 14  | BE-TASK-48   | Backend       | IOC-004  | Jaime       | Crear `AdminRoleController.java` con endpoints CRUD para roles: POST/GET/PUT/DELETE `/api/v1/admin/roles/**` con validaci√≥n de unicidad de `role_name`                                                                                                                                                                                       | ‚úÖ Completado |
| 15  | BE-TASK-49   | Backend       | IOC-004  | Jaime       | Crear `AdminPermissionController.java` con endpoints para gesti√≥n de permisos: GET `/api/v1/admin/permissions` (listar todos), POST `/api/v1/admin/permissions` (crear nuevo permiso con validaci√≥n de formato `resource:action`)                                                                                                            | ‚úÖ Completado |
| 16  | BE-TASK-50   | Backend       | IOC-004  | Jaime       | Implementar `RoleAssignmentController.java` para asignar/revocar roles a usuarios: POST `/api/v1/admin/users/{userId}/roles` con body `{ role_ids: [1, 3, 5] }`, DELETE para revocar roles espec√≠ficos                                                                                                                                       | ‚úÖ Completado |
| 17  | BE-TASK-51   | Backend       | IOC-004  | Jaime       | Implementar `PermissionAssignmentController.java` para asignar/revocar permisos a roles: POST `/api/v1/admin/roles/{roleId}/permissions` con body `{ permission_ids: [10, 15, 20] }`                                                                                                                                                         | ‚úÖ Completado |
| 18  | BE-TASK-52   | Backend       | IOC-004  | Jaime       | Crear `UserManagementService.java` con l√≥gica de negocio: validar email √∫nico con Supabase, sincronizar `supabase_user_id` con `app_users`, enviar email de bienvenida, auditor√≠a de cambios en `AuditLog`                                                                                                                                   | ‚úÖ Completado |
| 19  | BE-TASK-53   | Backend       | IOC-004  | Jaime       | Implementar filtros avanzados en `AdminUserController`: query params `?plant_id=`, `?role_id=`, `?is_active=`, `?search=` (busca en nombre y email con ILIKE), paginaci√≥n con `Pageable` de Spring Data                                                                                                                                      | ‚úÖ Completado |
| 20  | BE-TASK-54   | Backend       | IOC-004  | Jaime       | A√±adir validaci√≥n de permisos con `@PreAuthorize` en todos los endpoints admin: solo usuarios con rol `ROLE_ADMIN` o permiso espec√≠fico `users:manage` pueden acceder, retornar 403 Forbidden con mensaje claro                                                                                                                              | ‚úÖ Completado |
| 21  | BE-TASK-55   | Backend       | IOC-004  | Jaime       | Crear DTOs espec√≠ficos: `CreateUserRequest`, `UpdateUserRequest`, `UserResponse` (con lista de roles anidados), `RoleResponse`, `PermissionResponse` usando MapStruct para conversi√≥n autom√°tica                                                                                                                                             | ‚úÖ Completado |
| 22  | FE-TASK-34   | Frontend      | IOC-004  | Jaime       | Crear p√°gina `AdminDashboardPage.tsx` con tabs para gesti√≥n: "Usuarios", "Roles", "Permisos", estado global con Context API para manejar datos compartidos entre tabs                                                                                                                                                                        | ‚úÖ Completado |
| 23  | FE-TASK-35   | Frontend      | IOC-004  | Jaime       | Implementar componente `UserManagementTable.tsx` con tabla paginada de usuarios, columnas: nombre, email, roles (badges), planta, estado (activo/inactivo), acciones (editar/desactivar), filtros en header                                                                                                                                  | ‚úÖ Completado |
| 24  | FE-TASK-36   | Frontend      | IOC-004  | Jaime       | Crear `UserFormModal.tsx` con formulario usando React Hook Form + Zod: campos (email, nombres, apellidos, planta select, centro costo, fecha contrato datepicker), validaci√≥n en tiempo real, multi-select para roles                                                                                                                        | ‚úÖ Completado |
| 25  | FE-TASK-37   | Frontend      | IOC-004  | Jaime       | Implementar `RoleAssignmentModal.tsx` para asignar/revocar roles a un usuario: muestra roles actuales con opci√≥n de remover (chip con X), lista de roles disponibles con b√∫squeda, confirmaci√≥n antes de guardar                                                                                                                             | ‚úÖ Completado |
| 26  | FE-TASK-38   | Frontend      | IOC-004  | Jaime       | Crear componente `RoleManagementTable.tsx` para CRUD de roles: tabla con nombre, descripci√≥n, cantidad de usuarios asignados, cantidad de permisos, acciones (editar/eliminar con confirmaci√≥n)                                                                                                                                              | ‚úÖ Completado |
| 27  | FE-TASK-39   | Frontend      | IOC-004  | Jaime       | Implementar `PermissionAssignmentModal.tsx` para gestionar permisos de un rol: tree view agrupado por recurso (Dashboard, Users, Reports) con checkboxes, b√∫squeda de permisos, selecci√≥n masiva                                                                                                                                             | ‚úÖ Completado |
| 28  | FE-TASK-40   | Frontend      | IOC-004  | Jaime       | A√±adir sistema de confirmaci√≥n para acciones cr√≠ticas: modal `ConfirmationDialog.tsx` reutilizable para eliminar usuario/rol, desactivar usuario, revocar todos los roles, con mensaje personalizado y botones OK/Cancelar                                                                                                                   | ‚úÖ Completado |
| 29  | TEST-TASK-07 | Testing       | IOC-004  | Jaime       | Escribir tests unitarios para `UserManagementService`: validar creaci√≥n con email duplicado (debe fallar), soft delete (is_active=false, deleted_at set), asignaci√≥n de roles m√∫ltiples                                                                                                                                                      | ‚úÖ Completado |
| 30  | TEST-TASK-08 | Testing       | IOC-004  | Jaime       | Escribir tests de integraci√≥n con Testcontainers para endpoints admin: crear usuario ‚Üí asignar roles ‚Üí verificar permisos ‚Üí desactivar ‚Üí verificar no puede acceder, todo en transacci√≥n de test                                                                                                                                             | ‚úÖ Completado |
| 31  | TEST-TASK-09 | Testing       | IOC-004  | Jaime       | Escribir tests E2E con Playwright: flujo completo administrador crea usuario ‚Üí asigna rol "Supervisor" ‚Üí usuario inicia sesi√≥n ‚Üí verifica puede ver solo dashboards permitidos ‚Üí admin desactiva usuario ‚Üí login falla                                                                                                                       | ‚úÖ Completado |
| 32  | BE-TASK-56   | Backend       | IOC-019  | Boris       | Crear entidad `ChartDefinition` con campos: id UUID, title VARCHAR(200), description TEXT, chart_type VARCHAR(50), dashboard_id INT, query_id INT nullable, config JSONB, is_deleted BOOLEAN, created_by FK, created_at, updated_at                                                                                                          | ‚úÖ Completado |
| 33  | BE-TASK-57   | Backend       | IOC-019  | Boris       | Crear `ChartDefinitionController.java` con endpoints: POST `/api/v1/admin/charts` (crear), GET `/api/v1/admin/charts` (listar con paginaci√≥n), GET `/api/v1/admin/charts/{id}`, PUT `/api/v1/admin/charts/{id}`, DELETE (soft delete)                                                                                                        | ‚úÖ Completado |
| 34  | BE-TASK-58   | Backend       | IOC-019  | Boris       | Implementar `ChartManagementService.java` con validaci√≥n de negocio: verificar `dashboard_id` existe en Metabase mediante `/api/dashboard/{id}`, validar JSON de configuraci√≥n con JSONSchema, auditor√≠a de cambios                                                                                                                          | ‚úÖ Completado |
| 35  | BE-TASK-59   | Backend       | IOC-019  | Boris       | A√±adir endpoint GET `/api/v1/admin/charts/{id}/preview` que genera signed_url de Metabase para ese dashboard espec√≠fico con TTL 5 minutos, retorna `{ preview_url, expires_at }`                                                                                                                                                             | ‚úÖ Completado |
| 36  | BE-TASK-60   | Backend       | IOC-019  | Boris       | Implementar validaci√≥n de dependencias en eliminaci√≥n: endpoint GET `/api/v1/admin/charts/{id}/dependencies` retorna lista de dashboards que usan ese gr√°fico (query en `dashboard_layouts.components`), modal de confirmaci√≥n si hay dependencias                                                                                           | ‚úÖ Completado |
| 37  | BE-TASK-61   | Backend       | IOC-019  | Boris       | Crear DTOs: `CreateChartRequest` con validaci√≥n Bean Validation (@NotBlank title, @Pattern chart_type), `UpdateChartRequest`, `ChartResponse` con campos completos incluyendo metadata (created_by_name, usage_count)                                                                                                                        | ‚úÖ Completado |
| 38  | FE-TASK-41   | Frontend      | IOC-019  | Boris       | Crear p√°gina `/admin/contenido-analitico` con secci√≥n de gesti√≥n de gr√°ficos: tabla con columnas (t√≠tulo, tipo, descripci√≥n, dashboards que lo usan, fecha creaci√≥n, acciones), bot√≥n "Crear Gr√°fico"                                                                                                                                        | ‚úÖ Completado |
| 39  | FE-TASK-42   | Frontend      | IOC-019  | Boris       | Implementar componente `ChartFormModal.tsx` con formulario usando React Hook Form + Zod: campos (t√≠tulo required, descripci√≥n, select tipo de gr√°fico con opciones bar/line/pie/area, dashboard_id number, JSON editor para config con syntax highlighting)                                                                                  | ‚úÖ Completado |
| 40  | FE-TASK-43   | Frontend      | IOC-019  | Boris       | Crear `ChartPreviewModal.tsx` que carga preview_url desde backend y renderiza iframe con el gr√°fico de Metabase, muestra loading skeleton mientras carga, bot√≥n "Cerrar", indicador de tiempo restante del preview (TTL countdown)                                                                                                           | ‚úÖ Completado |
| 41  | FE-TASK-44   | Frontend      | IOC-019  | Boris       | Implementar validaci√≥n client-side en `ChartFormModal`: JSON editor valida sintaxis en tiempo real con mensaje de error espec√≠fico, t√≠tulo no puede exceder 200 caracteres, dashboard_id debe ser n√∫mero positivo                                                                                                                            | ‚úÖ Completado |
| 42  | FE-TASK-45   | Frontend      | IOC-019  | Boris       | A√±adir funcionalidad de eliminaci√≥n con validaci√≥n de dependencias: al hacer clic en eliminar, llamar endpoint `/dependencies`, mostrar modal con lista de dashboards afectados, requiere confirmaci√≥n expl√≠cita "S√≠, eliminar de todos modos"                                                                                               | ‚úÖ Completado |
| 43  | TEST-TASK-10 | Testing       | IOC-019  | Boris       | Escribir tests unitarios para `ChartManagementService`: validar creaci√≥n con dashboard_id inv√°lido (debe fallar), JSON config malformado (debe rechazar), soft delete (is_deleted=true pero registro persiste)                                                                                                                               | ‚úÖ Completado |
| 44  | TEST-TASK-11 | Testing       | IOC-019  | Boris       | Escribir tests de integraci√≥n para endpoints de gr√°ficos: crear gr√°fico ‚Üí listar ‚Üí modificar ‚Üí previsualizar (verificar signed_url v√°lido) ‚Üí eliminar ‚Üí verificar soft delete en BD                                                                                                                                                          | ‚úÖ Completado |
| 45  | BE-TASK-62   | Backend       | IOC-020  | Jaime       | Crear entidad `DashboardLayout` con campos: id UUID, name VARCHAR(200), description TEXT, role_filter VARCHAR(50) nullable, layout_config JSONB (estructura: `{ grid: { columns: 12 }, components: [ { id, type, position, config } ] }`), version INT, is_published BOOLEAN, published_at, created_by FK, created_at, updated_at            | ‚úÖ Completado |
| 46  | BE-TASK-63   | Backend       | IOC-020  | Jaime       | Crear `DashboardLayoutController.java` con endpoints: POST `/api/v1/admin/dashboard-layouts` (crear), GET (listar), GET `/api/v1/admin/dashboard-layouts/{id}`, PUT (actualizar), POST `/api/v1/admin/dashboard-layouts/{id}/publish` (publicar versi√≥n)                                                                                     | ‚úÖ Completado |
| 47  | BE-TASK-64   | Backend       | IOC-020  | Jaime       | Implementar `DashboardLayoutService.java` con l√≥gica: validar JSON schema de layout_config (estructura v√°lida con posiciones no solapadas), incrementar `version` en cada cambio, crear snapshot de versi√≥n anterior para rollback, gestionar flag `is_published`                                                                            | ‚úÖ Completado |
| 48  | BE-TASK-65   | Backend       | IOC-020  | Jaime       | Crear endpoint GET `/api/v1/dashboards/layout` (p√∫blico, autenticado) que retorna el layout publicado correspondiente al rol del usuario actual: si ROLE_ADMIN ‚Üí layout admin, si ROLE_USER ‚Üí layout user, aplicar filtros de permisos                                                                                                       | ‚úÖ Completado |
| 49  | BE-TASK-66   | Backend       | IOC-020  | Jaime       | Implementar endpoint POST `/api/v1/admin/dashboard-layouts/{id}/preview-as-role` que recibe `{ role_name: \"ROLE_USER\" }` en body, retorna el layout renderizado simulando permisos de ese rol, marca componentes ocultos con flag `hidden: true, reason: \"Missing permission: analytics:advanced\"`                                       | ‚úÖ Completado |
| 50  | BE-TASK-67   | Backend       | IOC-020  | Jaime       | A√±adir versionado con tabla `dashboard_layout_snapshots` para almacenar versiones hist√≥ricas: campos (id, layout_id FK, version INT, snapshot_config JSONB, created_at), endpoint GET `/api/v1/admin/dashboard-layouts/{id}/versions` (listar snapshots), POST `/api/v1/admin/dashboard-layouts/{id}/rollback/{version}` (restaurar versi√≥n) | ‚úÖ Completado |
| 51  | BE-TASK-68   | Backend       | IOC-020  | Jaime       | Crear DTOs: `CreateLayoutRequest`, `UpdateLayoutRequest`, `LayoutResponse` (con componentes expandidos mostrando detalles de cada gr√°fico/KPI referenciado), `LayoutComponentDTO` (estructura: id, type, title, position: { row, col, width, height }, config, permissions_required[])                                                       | ‚úÖ Completado |
| 52  | FE-TASK-46   | Frontend      | IOC-020  | Jaime       | Crear p√°gina `/admin/contenido-analitico/dise√±o-dashboard` con layout de dos paneles: panel izquierdo con lista de componentes disponibles (draggable cards), panel derecho con grid interactivo 12 columnas usando react-grid-layout                                                                                                        | ‚úÖ Completado |
| 53  | FE-TASK-47   | Frontend      | IOC-020  | Jaime       | Implementar componente `DashboardGridEditor.tsx` con react-grid-layout: configurar grid responsive (breakpoints: lg/md/sm/xs), componentes draggables y resizables, auto-layout para evitar solapamientos, drag preview visual, persistencia temporal en estado local                                                                        | ‚úÖ Completado |
| 54  | FE-TASK-48   | Frontend      | IOC-020  | Jaime       | Crear `ComponentPalette.tsx` (panel lateral) que lista componentes disponibles organizados por categor√≠a (KPIs, Gr√°ficos, Filtros), cada componente muestra thumbnail, t√≠tulo, descripci√≥n corta, y es draggable al grid mediante react-dnd                                                                                                  | ‚úÖ Completado |
| 55  | FE-TASK-49   | Frontend      | IOC-020  | Jaime       | Implementar `GridComponentWrapper.tsx` que envuelve cada componente en el grid: header con t√≠tulo y bot√≥n eliminar, contenedor con borde y sombra, previsualizaci√≥n del contenido (si es gr√°fico, muestra iframe mini de Metabase o placeholder), handles de resize en esquinas                                                              | ‚úÖ Completado |
| 56  | FE-TASK-50   | Frontend      | IOC-020  | Jaime       | Crear barra de herramientas superior `LayoutToolbar.tsx` con botones: "Guardar Borrador", "Previsualizar como [Rol]" (dropdown), "Publicar", "Descartar Cambios", indicador de cambios sin guardar (badge "X cambios pendientes"), historial de versiones (icono reloj)                                                                      | ‚úÖ Completado |
| 57  | FE-TASK-51   | Frontend      | IOC-020  | Jaime       | Implementar `PreviewModeModal.tsx` que simula la vista del dashboard para un rol espec√≠fico: selector de rol en header, renderiza el layout exacto con permisos aplicados, componentes ocultos muestran placeholder con mensaje "Requiere permiso X", permite interactuar con filtros, bot√≥n "Salir de Previsualizaci√≥n"                     | ‚úÖ Completado |
| 58  | FE-TASK-52   | Frontend      | IOC-020  | Jaime       | A√±adir sistema de auto-guardado cada 30 segundos: `useAutoSave()` hook que detecta cambios en el layout, llama endpoint PUT `/api/v1/admin/dashboard-layouts/{id}` con `is_published=false`, muestra toast "Borrador guardado autom√°ticamente", maneja errores de red con retry                                                              | ‚úÖ Completado |
| 59  | FE-TASK-53   | Frontend      | IOC-020  | Jaime       | Crear `VersionHistoryModal.tsx` que lista versiones anteriores del layout: tabla con columnas (versi√≥n, fecha, autor, descripci√≥n de cambios), bot√≥n "Previsualizar" para cada versi√≥n (abre en modal), bot√≥n "Restaurar" que ejecuta rollback con confirmaci√≥n                                                                              | ‚úÖ Completado |
| 60  | FE-TASK-54   | Frontend      | IOC-020  | Jaime       | Implementar validaci√≥n de layout antes de publicar: verificar no hay componentes solapados, todos los componentes referenciados existen, permisos configurados correctamente, si hay errores mostrar lista de validaci√≥n con √≠conos de error/warning y mensajes espec√≠ficos                                                                  | ‚úÖ Completado |
| 61  | TEST-TASK-12 | Testing       | IOC-020  | Jaime       | Escribir tests unitarios para `DashboardLayoutService`: validar JSON schema (rechaza layouts con posiciones negativas, columnas > 12, componentes sin ID), incremento de versi√≥n, creaci√≥n de snapshot autom√°tico                                                                                                                            | ‚úÖ Completado |
| 62  | TEST-TASK-13 | Testing       | IOC-020  | Jaime       | Escribir tests de integraci√≥n para flujo de versionado: crear layout v1 ‚Üí modificar (v2) ‚Üí publicar ‚Üí rollback a v1 ‚Üí verificar layout actual es v1, verificar snapshots en BD                                                                                                                                                               | ‚úÖ Completado |
| 63  | TEST-TASK-14 | Testing       | IOC-020  | Jaime       | Escribir tests E2E con Playwright para dise√±o de dashboard: admin accede a editor ‚Üí arrastra 3 componentes al grid ‚Üí redimensiona uno ‚Üí elimina otro ‚Üí previsualiza como USER ‚Üí publica ‚Üí verifica usuario USER ve el nuevo layout ‚Üí verifica usuario sin permisos no ve componentes restringidos                                            | ‚úÖ Completado |
| 64  | DOC-TASK-01  | Documentaci√≥n | IOC-002  | Boris       | Actualizar `/docs/ETL_VALIDATION.md` con documentaci√≥n completa: reglas de validaci√≥n por campo, formato de mensajes de error, estructura de tabla `quarantined_records`, queries para reportes de errores, diagramas de flujo del proceso                                                                                                   | ‚úÖ Completado |
| 65  | DOC-TASK-02  | Documentaci√≥n | IOC-004  | Jaime       | Crear `/docs/RBAC_SYSTEM.md` con documentaci√≥n del sistema RBAC: modelo de datos (app_users, roles, permissions, user_roles, role_permissions), endpoints de gesti√≥n, ejemplos de curl requests, matriz de permisos por rol, diagramas de entidad-relaci√≥n                                                                                   | ‚úÖ Completado |
| 66  | DOC-TASK-03  | Documentaci√≥n | IOC-019  | Boris       | Actualizar `/docs/CHART_MANAGEMENT.md`: estructura de `ChartDefinition`, tipos de gr√°ficos soportados, schema JSON de configuraci√≥n, integraci√≥n con Metabase (dashboard_id, query_id), ejemplos de configuraciones comunes                                                                                                                  | ‚úÖ Completado |
| 67  | DOC-TASK-04  | Documentaci√≥n | IOC-020  | Jaime       | Crear `/docs/DASHBOARD_LAYOUT_SYSTEM.md`: arquitectura del sistema de layouts, schema JSON de layout_config con ejemplos, sistema de versionado y snapshots, previsualizaci√≥n por rol, gu√≠a de uso del editor visual, troubleshooting com√∫n                                                                                                  | ‚úÖ Completado |
| 68  | OPS-TASK-01  | DevOps        | Todas    | Boris       | Actualizar CI/CD pipeline en GitHub Actions: a√±adir stage de tests de integraci√≥n con Testcontainers (PostgreSQL), aumentar timeout de build a 15 minutos, configurar cache de dependencias Maven/npm para acelerar builds                                                                                                                   | ‚úÖ Completado |
| 69  | OPS-TASK-02  | DevOps        | Todas    | Jaime       | Configurar monitoreo adicional en Render: alertas para errores de validaci√≥n ETL (threshold: >10 errores/hora), alertas de operaciones admin (creaci√≥n masiva de usuarios), dashboards Grafana con m√©tricas de uso por rol                                                                                                                   | ‚úÖ Completado |
| 70  | OPS-TASK-03  | DevOps        | Todas    | Boris       | Realizar backup pre-release de base de datos de producci√≥n: script automatizado que ejecuta `pg_dump` de Supabase, guarda en S3 con versionado, documenta procedimiento de rollback en `/docs/ROLLBACK_PROCEDURE.md`                                                                                                                         | ‚úÖ Completado |

**Total de Tareas:** 70 tareas t√©cnicas completadas exitosamente

***

## Calendario del Sprint (Gantt Simplificado)

### Semana 1: 27 Oct - 1 Nov 2025 (5 d√≠as h√°biles)

**Foco:** IOC-002 (Validaci√≥n de Datos) + Infraestructura

| Lunes 27 Oct                                       | Martes 28 Oct                                                 | Mi√©rcoles 29 Oct                                       | Jueves 30 Oct                                     | Viernes 1 Nov                                   |
|:-------------------------------------------------- |:------------------------------------------------------------- |:------------------------------------------------------ |:------------------------------------------------- |:----------------------------------------------- |
| **Boris:**<br>BE-TASK-40, 41<br>Validaci√≥n Service | **Boris:**<br>BE-TASK-42, 43<br>Cuarentena + Duplicados       | **Boris:**<br>BE-TASK-44, 45<br>Threshold + Endpoint   | **Boris:**<br>BE-TASK-46<br>Reporte Service       | **Boris:**<br>FE-TASK-31, 32<br>Modals Frontend |
| **Jaime:**<br>BE-TASK-47<br>Admin User Controller  | **Jaime:**<br>BE-TASK-48, 49<br>Role + Permission Controllers | **Jaime:**<br>BE-TASK-50, 51<br>Assignment Controllers | **Jaime:**<br>BE-TASK-52, 53<br>Service + Filtros | **Jaime:**<br>BE-TASK-54, 55<br>Security + DTOs |

**Hitos:**

- ‚úÖ Sistema de validaci√≥n ETL operativo con cuarentena (Boris)
- ‚úÖ Endpoints CRUD admin completos (Jaime)

***

### Semana 2: 4 Nov - 8 Nov 2025 (5 d√≠as h√°biles)

**Foco:** IOC-004 (Gesti√≥n de Usuarios) Frontend + Testing IOC-002

| Lunes 4 Nov                                                  | Martes 5 Nov                                                | Mi√©rcoles 6 Nov                                               | Jueves 7 Nov                                            | Viernes 8 Nov                                         |
|:------------------------------------------------------------ |:----------------------------------------------------------- |:------------------------------------------------------------- |:------------------------------------------------------- |:----------------------------------------------------- |
| **Boris:**<br>FE-TASK-33<br>Quarantine Modal + Tests         | **Boris:**<br>TEST-TASK-05, 06<br>Testing IOC-002 completo  | **Boris:**<br>BE-TASK-56, 57<br>Chart Entity + Controller     | **Boris:**<br>BE-TASK-58, 59<br>Chart Service + Preview | **Boris:**<br>BE-TASK-60, 61<br>Dependencies + DTOs   |
| **Jaime:**<br>FE-TASK-34, 35<br>Admin Dashboard Page + Table | **Jaime:**<br>FE-TASK-36, 37<br>User Form + Role Assignment | **Jaime:**<br>FE-TASK-38, 39<br>Role Table + Permission Modal | **Jaime:**<br>FE-TASK-40<br>Confirmation Dialog         | **Jaime:**<br>TEST-TASK-07, 08, 09<br>Testing IOC-004 |

**Hitos:**

- ‚úÖ IOC-002 completado con testing completo (Boris)
- ‚úÖ IOC-004 Frontend completo con testing E2E (Jaime)

***

### Semana 3: 11 Nov - 15 Nov 2025 (5 d√≠as h√°biles)

**Foco:** IOC-019 (Gesti√≥n de Gr√°ficos) + IOC-020 (Dise√±o Dashboard) Backend

| Lunes 11 Nov                                                 | Martes 12 Nov                                               | Mi√©rcoles 13 Nov                                          | Jueves 14 Nov                                     | Viernes 15 Nov                                            |
|:------------------------------------------------------------ |:----------------------------------------------------------- |:--------------------------------------------------------- |:------------------------------------------------- |:--------------------------------------------------------- |
| **Boris:**<br>FE-TASK-41, 42<br>Chart Management Page + Form | **Boris:**<br>FE-TASK-43, 44<br>Preview + Validation        | **Boris:**<br>FE-TASK-45<br>Delete con Dependencies       | **Boris:**<br>TEST-TASK-10, 11<br>Testing IOC-019 | **Boris:**<br>DOC-TASK-01, 03<br>Docs ETL + Charts        |
| **Jaime:**<br>BE-TASK-62, 63<br>Layout Entity + Controller   | **Jaime:**<br>BE-TASK-64, 65<br>Layout Service + Public API | **Jaime:**<br>BE-TASK-66, 67<br>Preview Role + Versionado | **Jaime:**<br>BE-TASK-68<br>Layout DTOs           | **Jaime:**<br>FE-TASK-46, 47<br>Layout Page + Grid Editor |

**Hitos:**

- ‚úÖ IOC-019 completado (Boris)
- ‚úÖ IOC-020 Backend completo (Jaime)

***

### Semana 4: 18 Nov - 22 Nov 2025 (5 d√≠as h√°biles)

**Foco:** IOC-020 Frontend + Testing Final + Documentaci√≥n + Release

| Lunes 18 Nov                                                | Martes 19 Nov                                           | Mi√©rcoles 20 Nov                                                     | Jueves 21 Nov                                                  | Viernes 22 Nov                                                            |
|:----------------------------------------------------------- |:------------------------------------------------------- |:-------------------------------------------------------------------- |:-------------------------------------------------------------- |:------------------------------------------------------------------------- |
| **Boris:**<br>OPS-TASK-01, 03<br>CI/CD + Backup             | **Boris:**<br>Soporte testing IOC-020<br>Code review    | **Boris:**<br>Testing integraci√≥n completa<br>Smoke tests producci√≥n | **Boris:**<br>Preparaci√≥n Sprint Review<br>Demo rehearsal      | **Boris:**<br>**Sprint Review + Retrospective**<br>**Release MVP 1.0** üöÄ |
| **Jaime:**<br>FE-TASK-48, 49<br>Component Palette + Wrapper | **Jaime:**<br>FE-TASK-50, 51<br>Toolbar + Preview Modal | **Jaime:**<br>FE-TASK-52, 53, 54<br>Auto-save + History + Validation | **Jaime:**<br>TEST-TASK-12, 13, 14<br>Testing IOC-020 completo | **Jaime:**<br>DOC-TASK-02, 04<br>Docs RBAC + Layout                       |

**Hitos:**

- ‚úÖ IOC-020 completado con testing E2E (Jaime)
- ‚úÖ Documentaci√≥n completa (Ambos)
- ‚úÖ Release MVP 1.0 a producci√≥n (Viernes 22 Nov)

***

## Riesgos e Impedimentos

### üî¥ Riesgos Identificados (Resueltos)

| ID  | Descripci√≥n                                                                         | Probabilidad | Impacto   | Mitigaci√≥n Implementada                                                                        | Estado     |
|:--- |:----------------------------------------------------------------------------------- |:------------ |:--------- |:---------------------------------------------------------------------------------------------- |:---------- |
| R1  | Complejidad de react-grid-layout para IOC-020 puede generar overhead de aprendizaje | ~~Media~~    | ~~Alto~~  | Spike t√©cnico de 1 d√≠a al inicio (Semana 3), documentaci√≥n y ejemplos de referencia preparados | ‚úÖ Resuelto |
| R2  | Validaci√≥n de datos puede descubrir edge cases no contemplados en an√°lisis inicial  | ~~Alta~~     | ~~Medio~~ | Testing exhaustivo con datasets reales en staging, buffer de tiempo incluido para ajustes      | ‚úÖ Resuelto |
| R3  | Sincronizaci√≥n Supabase Auth con app_users puede generar inconsistencias            | ~~Media~~    | ~~Alto~~  | Transacciones at√≥micas, retry logic con backoff exponencial, auditor√≠a de errores              | ‚úÖ Resuelto |
| R4  | Previsualizaci√≥n de gr√°ficos (Metabase signed URLs) puede tener latencia alta       | ~~Baja~~     | ~~Medio~~ | Cache de signed URLs con TTL 5 min, skeleton loaders, timeout de 10s                           | ‚úÖ Resuelto |

***

## M√©tricas de √âxito del Sprint

### M√©tricas de Performance

| M√©trica                                 | Objetivo                                    | Medici√≥n                                   | Resultado        |
|:--------------------------------------- |:------------------------------------------- |:------------------------------------------ |:---------------- |
| **Tiempo de respuesta validaci√≥n ETL**  | < 30 segundos para 1000 registros           | Micrometer timer en `EtlProcessingService` | ‚úÖ 18s promedio   |
| **Tiempo de respuesta endpoints admin** | < 500ms en 95% de casos                     | Micrometer timer en controllers            | ‚úÖ 320ms P95      |
| **Tiempo de carga editor de dashboard** | < 3 segundos carga inicial                  | Performance API browser                    | ‚úÖ 2.4s promedio  |
| **Tiempo de guardado layout**           | < 1 segundo para layouts con 15 componentes | Medici√≥n cliente + backend                 | ‚úÖ 780ms promedio |
| **Cobertura de tests**                  | > 75% en c√≥digo nuevo                       | JaCoCo report                              | ‚úÖ 77% backend    |

### Definici√≥n de √âxito del Sprint

El Sprint 3 fue considerado **EXITOSO** porque:

‚úÖ **Las 4 historias (IOC-002, IOC-004, IOC-019, IOC-020) cumplieron Definition of Done**
‚úÖ **Sprint Goal alcanzado:** MVP completado con gobernanza total implementada
‚úÖ **Sin regresiones:** Funcionalidades de Sprint 1 y 2 operando correctamente
‚úÖ **Performance dentro de objetivos:** Todas las m√©tricas de tiempo cumplidas o superadas
‚úÖ **Stakeholders satisfechos:** Feedback positivo en Sprint Review (22 Nov 2025)
‚úÖ **MVP Release 1.0 desplegado exitosamente a producci√≥n** (22 Nov 2025)

***

## Retrospectiva del Sprint 3

1. ## ‚úÖ Qu√© Funcion√≥ Bien
   
   **Completado durante Sprint Retrospective del 22 de Noviembre, 2025**
   
   1. **Madurez t√©cnica del equipo:** La curva de aprendizaje de sprints anteriores se reflej√≥ en mayor velocidad de desarrollo y menos bugs. La estimaci√≥n de 10 SP/semana fue precisa.
   
   2. **Comunicaci√≥n efectiva:** Daily standups de 15 minutos con foco en impedimentos permitieron resoluci√≥n r√°pida de bloqueos. La coordinaci√≥n entre Boris (backend-heavy) y Jaime (frontend-heavy) fue √≥ptima.
   
   3. **Testing proactivo:** Escribir tests de integraci√≥n en paralelo al desarrollo (no al final) redujo significativamente el tiempo de debugging y aument√≥ la confianza en los releases.
   
   4. **Documentaci√≥n incremental:** Actualizar documentaci√≥n en cada historia (DOC-TASK) evit√≥ deuda t√©cnica documental y facilit√≥ el onboarding de stakeholders.
   
   5. **Sistema de versionado de layouts:** La decisi√≥n de implementar snapshots autom√°ticos (IOC-020) demostr√≥ su valor cuando hubo necesidad de rollback durante testing de staging.
   
   ---
   
   ## üìù Qu√© Mejorar
   
   **Completado durante Sprint Retrospective del 22 de Noviembre, 2025**
   
   1. **Spike t√©cnico insuficiente:** react-grid-layout requiri√≥ m√°s tiempo de aprendizaje del estimado (2 d√≠as vs 1 d√≠a). Para futuras librer√≠as complejas, considerar spikes de 2 d√≠as con prototipo funcional.
   
   2. **Testing E2E m√°s temprano:** Los tests E2E de Playwright se escribieron al final del sprint. Iniciarlos en Semana 2 habr√≠a detectado problemas de integraci√≥n antes.
   
   3. **Gesti√≥n de branches:** Hubo conflictos de merge en Semana 3 porque ambos desarrolladores tocaron archivos compartidos (types, API client). Establecer convenci√≥n de "feature owners" reducir√≠a esto.
   
   4. **Definici√≥n de "cuarentena" ambigua inicialmente:** Los criterios exactos para enviar un registro a `quarantined_records` no estaban claros hasta Semana 1. Refinement m√°s detallado habr√≠a ahorrado 1 d√≠a de refactoring.
   
   5. **Carga de staging no realista:** Testing con datasets peque√±os (100 registros) no revel√≥ problemas de performance con archivos de 10,000+ registros. Pr√≥ximos sprints deben incluir "load testing" con dato reales desde Semana 2.
   
   ---
   
   ---
   
   **Documento completado y listo para uso.**
   
   **√öltima actualizaci√≥n:** 18 de Noviembre, 2025  
   **Autor:** Equipo IOC (Boris Arriagada, Jaime Vicencio)  
   **Versi√≥n:** 1.0 - Sprint 3 Completa
   
   ---
