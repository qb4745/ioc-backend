# Sprint 2 ‚Äì Sprint Backlog (Desatando la Interactividad Anal√≠tica)

## Metadata del Sprint

**Proyecto:** Plataforma IOC - Sistema de Business Intelligence  
**Sprint:** Sprint 2 - Interactividad Anal√≠tica  
**Per√≠odo:** 6 de Octubre - 24 de Octubre, 2025  
**Duraci√≥n:** 3 semanas (15 d√≠as h√°biles)  
**Equipo:**

- **Product Owner:** Boris Arriagada
- **Scrum Master:** Jaime Vicencio
- **Development Team:** Boris Arriagada (Backend/Frontend), Jaime Vicencio (Frontend/Backend)

**Festivos/No laborables:** Ninguno durante este per√≠odo

**Velocity del Equipo:** ~10 SP/semana (basado en Sprint 1: 41 SP en 4 semanas)  
**Capacidad Te√≥rica del Sprint:** 30 SP (10 SP/semana √ó 3 semanas)
**Capacidad Comprometida:** 21 SP (70% de capacidad - incluye buffer 30%)
**Buffer para Impedimentos:** 9 SP (~30% reservado para spikes t√©cnicos, riesgos e imprevistos)

**Justificaci√≥n del Buffer Amplio:**

- Riesgo alto: Generaci√≥n de PDFs complejos (35% probabilidad)
- Primera vez usando Apache POI y Flying Saucer (curva de aprendizaje)
- Boris tiene doble rol (PO + Dev) reduciendo capacidad efectiva ~20%

---

## üéØ SPRINT GOAL

**"Transformar el dashboard est√°tico en una herramienta de an√°lisis interactiva donde el usuario final pueda filtrar datos por l√≠nea, per√≠odo y maqu√≠na, adem√°s de comparar desempe√±o entre turnos y l√≠neas para investigar patrones de rendimiento y exportar resultados."**

Al finalizar este Sprint, los gerentes y supervisores podr√°n:

- Aplicar filtros din√°micos a los dashboards para an√°lisis espec√≠ficos
- Comparar m√©tricas entre diferentes turnos, l√≠neas y per√≠odos
- Exportar visualizaciones y datos en formato PDF/Excel para reportes
- Identificar patrones de rendimiento y oportunidades de mejora mediante comparativas interactivas

**Valor de Negocio:** Habilitar an√°lisis profundo y toma de decisiones basada en comparativas, eliminando la necesidad de exportar a herramientas externas.

---

## Historias Comprometidas

| ID      | T√≠tulo                                                                                                                      | Tipo                | Feature              | Prioridad | SP  | Asignado | Estado |
|:------- |:--------------------------------------------------------------------------------------------------------------------------- |:------------------- |:-------------------- |:--------- |:---:|:-------- |:------ |
| IOC-008 | Como gerente, quiero comparar el desempe√±o entre turnos y l√≠neas para identificar patrones y oportunidades de mejora.       | Historia de Usuario | An√°lisis Comparativo | Cr√≠tica   | 13  | Boris    | ‚úÖ Done |
| IOC-012 | Como supervisor-analista, quiero filtrar datos por l√≠nea, periodo y taller para realizar an√°lisis detallados y espec√≠ficos. | Historia de Usuario | Filtrado Din√°mico    | Cr√≠tica   | 8   | Jaime    | ‚úÖ Done |

**Total Story Points Comprometidos:** 21 SP

---

## Criterios de Aceptaci√≥n

### **IOC-008: Como gerente, quiero comparar el desempe√±o entre turnos y l√≠neas para identificar patrones y oportunidades de mejora.**

**Contexto:** Los gerentes necesitan identificar qu√© turnos o l√≠neas tienen mejor desempe√±o para replicar mejores pr√°cticas y detectar √°reas problem√°ticas.

**Criterios de Aceptaci√≥n:**

‚úÖ **Comparativa generada correctamente**

- **Dado** un gerente autenticado en el dashboard de comparativas
- **Cuando** selecciona dos o m√°s entidades (turnos/l√≠neas) y un rango de fechas
- **Entonces** el sistema muestra gr√°ficos comparativos lado a lado con m√©tricas clave (producci√≥n, eficiencia, defectos) en menos de 3 segundos

‚úÖ **Datos insuficientes manejados apropiadamente**

- **Dado** un gerente que intenta generar una comparativa
- **Cuando** no existen datos suficientes para alguna de las entidades seleccionadas
- **Entonces** el sistema muestra un mensaje claro indicando "Datos insuficientes para [entidad]: Se requieren al menos 5 registros para generar comparativa" y sugiere ampliar el rango de fechas

‚úÖ **Exportar resultados de comparativa**

- **Dado** un gerente visualizando una comparativa exitosa
- **Cuando** hace clic en "Exportar" y selecciona formato (PDF o Excel)
- **Entonces** el sistema genera y descarga un archivo con:
  - Gr√°ficos comparativos (en PDF)
  - Tabla de datos con m√©tricas detalladas
  - Metadatos (fecha de generaci√≥n, filtros aplicados, usuario)
  - Descarga completada en menos de 5 segundos

‚úÖ **Actualizaci√≥n din√°mica sin recarga**

- **Dado** un gerente en la vista de comparativas
- **Cuando** modifica los filtros (cambia entidades, ajusta fechas, selecciona m√©tricas)
- **Entonces** el sistema actualiza los gr√°ficos sin recargar toda la p√°gina, mostrando un indicador de carga sutil durante la actualizaci√≥n (m√°ximo 2 segundos)

---

### **IOC-012: Como supervisor-analista, quiero filtrar datos por l√≠nea, periodo y taller para realizar an√°lisis detallados y espec√≠ficos.**

**Contexto:** Los supervisores necesitan enfocarse en datos espec√≠ficos de su √°rea de responsabilidad sin ruido de otras l√≠neas o per√≠odos.

**Criterios de Aceptaci√≥n:**

‚úÖ **Aplicaci√≥n de filtros exitosa**

- **Dado** un supervisor-analista autenticado en un dashboard
- **Cuando** selecciona filtros (l√≠nea espec√≠fica, rango de fechas, taller) y hace clic en "Aplicar"
- **Entonces** todos los gr√°ficos y KPIs del dashboard se actualizan mostrando solo los datos que coinciden con los filtros, y se muestra un badge visual indicando "Filtros activos: 3"

‚úÖ **Ning√∫n dato tras aplicar filtro**

- **Dado** un supervisor que ha aplicado filtros muy restrictivos
- **Cuando** la combinaci√≥n de filtros no arroja resultados (ej. l√≠nea X en fecha donde no oper√≥)
- **Entonces** el sistema muestra un mensaje informativo: "No se encontraron datos para los filtros seleccionados. Intenta ampliar el rango de fechas o seleccionar otra l√≠nea" sin mostrar gr√°ficos vac√≠os

‚úÖ **Filtros inv√°lidos prevenidos**

- **Dado** un supervisor configurando filtros
- **Cuando** intenta aplicar par√°metros incorrectos (ej. fecha de inicio posterior a fecha fin, formato de fecha inv√°lido)
- **Entonces** el sistema bloquea la aplicaci√≥n, muestra un mensaje de error espec√≠fico junto al campo problem√°tico ("La fecha de inicio debe ser anterior a la fecha de fin") y resalta el campo en rojo

‚úÖ **Reset de filtros y persistencia**

- **Dado** un supervisor con filtros activos
- **Cuando** hace clic en "Limpiar filtros"
- **Entonces** todos los campos de filtro vuelven a su estado por defecto y el dashboard muestra datos completos sin filtros
- **Y** los filtros aplicados persisten en la sesi√≥n del usuario (si recarga la p√°gina, los filtros se mantienen hasta que los limpie expl√≠citamente)

‚úÖ **Filtros con autocompletado**

- **Dado** un supervisor escribiendo en el campo de filtro "L√≠nea"
- **Cuando** comienza a escribir (ej. "L√≠nea 0")
- **Entonces** el sistema muestra sugerencias de autocompletado basadas en las l√≠neas disponibles en la base de datos, facilitando la selecci√≥n

---

## Checklist de Tareas T√©cnicas

| N¬∫  | ID           | Capa          | Historia         | Responsable | Descripci√≥n                                                                                                                                                | Estado       |
|:---:|:------------ |:------------- |:---------------- |:----------- |:---------------------------------------------------------------------------------------------------------------------------------------------------------- |:------------ |
| 1   | FE-TASK-18   | Frontend      | IOC-012          | Jaime       | Crear componente `DashboardFilters.tsx` con campos de filtro (l√≠nea, per√≠odo, taller) usando React Hook Form y Zod para validaci√≥n                         | ‚úÖ Completado |
| 2   | FE-TASK-19   | Frontend      | IOC-012          | Jaime       | Implementar l√≥gica de autocompletado en el campo "L√≠nea" usando Combobox de Headless UI, conectado a endpoint `/api/v1/filters/lines`                      | ‚úÖ Completado |
| 3   | FE-TASK-20   | Frontend      | IOC-012          | Jaime       | Crear hook personalizado `useFilters()` para manejar estado de filtros, validaci√≥n, aplicaci√≥n y reset con persistencia en localStorage                    | ‚úÖ Completado |
| 4   | FE-TASK-21   | Frontend      | IOC-012          | Jaime       | Integrar `DashboardFilters` con `DashboardEmbed.tsx` para pasar par√°metros de filtro a Metabase mediante URL params                                        | ‚úÖ Completado |
| 5   | FE-TASK-22   | Frontend      | IOC-012          | Jaime       | Implementar badge visual "Filtros activos: X" y bot√≥n "Limpiar filtros" con animaciones de transici√≥n                                                      | ‚úÖ Completado |
| 6   | FE-TASK-23   | Frontend      | IOC-012          | Jaime       | Manejar casos edge: mostrar mensaje "No hay datos" cuando filtros no arrojan resultados, validar fechas inv√°lidas con feedback en tiempo real              | ‚úÖ Completado |
| 7   | BE-TASK-25   | Backend       | IOC-012          | Jaime       | Crear `FilterController.java` con endpoint GET `/api/v1/filters/lines` para obtener lista de l√≠neas disponibles desde `dim_line`                           | ‚úÖ Completado |
| 8   | BE-TASK-26   | Backend       | IOC-012          | Jaime       | Crear `FilterController.java` con endpoint GET `/api/v1/filters/workshops` para obtener lista de talleres disponibles desde `dim_workshop`                 | ‚úÖ Completado |
| 9   | BE-TASK-27   | Backend       | IOC-012          | Jaime       | Implementar `FilterService.java` con cach√© (Caffeine, TTL 1 hora) para reducir queries repetitivas de l√≠neas/talleres                                      | ‚úÖ Completado |
| 10  | BE-TASK-28   | Backend       | IOC-012          | Jaime       | Modificar `MetabaseEmbeddingService.java` para aceptar par√°metros de filtro y construir payload JWT con filtros (`locked_parameters`)                      | ‚úÖ Completado |
| 11  | BE-TASK-29   | Backend       | IOC-012          | Jaime       | A√±adir validaci√≥n de fechas en `FilterController`: fecha_inicio <= fecha_fin, rango m√°ximo 365 d√≠as, formato ISO-8601                                      | ‚úÖ Completado |
| 12  | FE-TASK-24   | Frontend      | IOC-008          | Boris       | Crear p√°gina `ComparativeDashboardPage.tsx` con layout de selecci√≥n de entidades (multi-select para turnos/l√≠neas) y selector de rango de fechas           | ‚úÖ Completado |
| 13  | FE-TASK-25   | Frontend      | IOC-008          | Boris       | Implementar hook `useComparative()` para gestionar estado de selecci√≥n de entidades, llamadas a API `/api/v1/analytics/compare` y manejo de loading/error  | ‚úÖ Completado |
| 14  | FE-TASK-26   | Frontend      | IOC-008          | Boris       | Crear componente `ComparativeChartsGrid.tsx` para renderizar gr√°ficos lado a lado (Chart.js o Recharts) con m√©tricas: producci√≥n, eficiencia, defectos     | ‚úÖ Completado |
| 15  | FE-TASK-27   | Frontend      | IOC-008          | Boris       | Implementar l√≥gica de manejo de "datos insuficientes": mostrar mensaje espec√≠fico por entidad cuando no hay suficientes registros (< 5)                    | ‚úÖ Completado |
| 16  | FE-TASK-28   | Frontend      | IOC-008          | Boris       | Crear componente `ExportButton.tsx` con dropdown para seleccionar formato (PDF/Excel) y l√≥gica de descarga llamando a `/api/v1/analytics/export`           | ‚úÖ Completado |
| 17  | FE-TASK-29   | Frontend      | IOC-008          | Boris       | Implementar actualizaci√≥n din√°mica: cuando el usuario modifica filtros, disparar re-fetch sin recargar p√°gina completa, mostrar skeleton loading           | ‚úÖ Completado |
| 18  | FE-TASK-30   | Frontend      | IOC-008          | Boris       | A√±adir tests E2E con Playwright para flujo completo: seleccionar entidades ‚Üí visualizar comparativa ‚Üí exportar PDF ‚Üí verificar descarga                    | ‚úÖ Completado |
| 19  | BE-TASK-30   | Backend       | IOC-008          | Boris       | Crear `AnalyticsController.java` con endpoint POST `/api/v1/analytics/compare` recibiendo DTO con entidades (turnos/l√≠neas) y rango de fechas              | ‚úÖ Completado |
| 20  | BE-TASK-31   | Backend       | IOC-008          | Boris       | Implementar `ComparativeAnalyticsService.java` para ejecutar queries agregadas en `fact_production` agrupando por entidad seleccionada                     | ‚úÖ Completado |
| 21  | BE-TASK-32   | Backend       | IOC-008          | Boris       | Crear DTOs de respuesta: `ComparativeResultDTO` con lista de `EntityMetricsDTO` (nombre, producci√≥n_total, eficiencia_avg, defectos_total, num_registros)  | ‚úÖ Completado |
| 22  | BE-TASK-33   | Backend       | IOC-008          | Boris       | Implementar validaci√≥n de "datos suficientes": si una entidad tiene < 5 registros, incluir flag `insufficient_data: true` en el DTO de respuesta           | ‚úÖ Completado |
| 23  | BE-TASK-34   | Backend       | IOC-008          | Boris       | Crear `ExportController.java` con endpoint POST `/api/v1/analytics/export` recibiendo datos de comparativa y formato (PDF/EXCEL)                           | ‚úÖ Completado |
| 24  | BE-TASK-35   | Backend       | IOC-008          | Boris       | Implementar `ReportExportService.java` usando Apache POI para Excel y iText/Flying Saucer para PDF, incluyendo gr√°ficos y metadatos                        | ‚úÖ Completado |
| 25  | BE-TASK-36   | Backend       | IOC-008          | Boris       | A√±adir dependencias Maven: Apache POI (5.2.3) para Excel, Flying Saucer (9.1.22) para PDF, configurar l√≠mite de tama√±o de export (max 10,000 filas)        | ‚úÖ Completado |
| 26  | BE-TASK-37   | Backend       | IOC-008          | Boris       | Optimizar queries de comparativa: a√±adir √≠ndices compuestos en `fact_production` (`date`, `line_id`, `shift_id`) para acelerar agregaciones                | ‚úÖ Completado |
| 27  | BE-TASK-38   | Backend       | IOC-008          | Boris       | Implementar cach√© de resultados de comparativa con Caffeine (TTL 5 minutos, max 100 entradas) para reducir carga en BD con filtros repetidos               | ‚úÖ Completado |
| 28  | BE-TASK-39   | Backend       | IOC-008          | Boris       | A√±adir logging detallado y m√©tricas Micrometer: contador de comparativas generadas, timer de duraci√≥n de queries, gauge de tama√±o de exports               | ‚úÖ Completado |
| 29  | TEST-TASK-01 | Testing       | IOC-012          | Jaime       | Escribir tests unitarios para `FilterService`: validar respuestas de l√≠neas/talleres, verificar comportamiento de cach√© (hit/miss)                         | ‚úÖ Completado |
| 30  | TEST-TASK-02 | Testing       | IOC-012          | Jaime       | Escribir tests de integraci√≥n para `FilterController`: verificar endpoints GET retornan datos correctos, manejo de errores 404 si no hay datos             | ‚úÖ Completado |
| 31  | TEST-TASK-03 | Testing       | IOC-012          | Jaime       | Escribir tests E2E con Playwright: aplicar filtros ‚Üí verificar actualizaci√≥n de dashboard ‚Üí limpiar filtros ‚Üí verificar reset                              | ‚úÖ Completado |
| 32  | TEST-TASK-04 | Testing       | IOC-008          | Boris       | Escribir tests unitarios para `ComparativeAnalyticsService`: mockear repositorios, verificar c√°lculos de agregaciones, validar flag de datos insuficientes | ‚úÖ Completado |
| 33  | TEST-TASK-05 | Testing       | IOC-008          | Boris       | Escribir tests de integraci√≥n para `AnalyticsController`: probar endpoint POST con datos v√°lidos, inv√°lidos, casos l√≠mite (0 entidades, 10 entidades)      | ‚úÖ Completado |
| 34  | TEST-TASK-06 | Testing       | IOC-008          | Jaime       | Escribir tests para `ReportExportService`: generar PDF/Excel con datos mock, verificar estructura del archivo, metadatos correctos                         | ‚úÖ Completado |
| 35  | OPS-TASK-01  | DevOps        | IOC-008, IOC-012 | Jaime       | Actualizar pipeline CI/CD para ejecutar nuevos tests E2E de filtros y comparativas antes de deployment a staging                                           | ‚úÖ Completado |
| 36  | OPS-TASK-02  | DevOps        | IOC-008          | Boris       | Configurar l√≠mites de recursos para exportaci√≥n: timeout 30s, max heap 512MB para generaci√≥n de PDFs grandes, configurar en application.yml                | ‚úÖ Completado |
| 37  | DOC-TASK-01  | Documentaci√≥n | IOC-008, IOC-012 | Jaime       | Actualizar `/docs/api-endpoints.md` con nuevos endpoints de filtros, comparativas y exportaci√≥n incluyendo ejemplos de payloads                            | ‚úÖ Completado |
| 38  | DOC-TASK-02  | Documentaci√≥n | IOC-008, IOC-012 | Jaime       | Crear gu√≠a de usuario `/docs/user-guide-filters-comparatives.md` con capturas de pantalla y ejemplos de uso para gerentes y supervisores                   | ‚úÖ Completado |

**Total de Tareas:** 38 tareas t√©cnicas  
**Tareas Completadas:** 38/38 (100%)

---

## Progreso del Sprint

**‚úÖ SPRINT COMPLETADO - 24 DE OCTUBRE, 2025:**

### Historias Completadas: 2/2 (100%)

- ‚úÖ IOC-008: Como gerente, quiero comparar el desempe√±o entre turnos y l√≠neas para identificar patrones y oportunidades de mejora.
- ‚úÖ IOC-012: Como supervisor-analista, quiero filtrar datos por l√≠nea, periodo y taller para realizar an√°lisis detallados y espec√≠ficos.

### Story Points Completados: 21/21 (100%)

- Comprometidos: 21 SP
- Completados: 21 SP
- Restantes: 0 SP
- **üü¢ Sprint Goal Alcanzado:** Dashboard interactivo con filtros y comparativas funcionando completamente

### Distribuci√≥n de Trabajo por Miembro

**Jaime Vicencio (IOC-012 - Filtrado):**

- Frontend: 6 tareas (FE-TASK-18 a FE-TASK-23) ‚úÖ
- Backend: 5 tareas (BE-TASK-25 a BE-TASK-29) ‚úÖ
- Testing: 4 tareas (TEST-TASK-01 a TEST-TASK-03, TEST-TASK-06) ‚úÖ
- DevOps: 1 tarea (OPS-TASK-01) ‚úÖ
- Documentaci√≥n: 2 tareas (DOC-TASK-01, DOC-TASK-02) ‚úÖ
- **Total: 18 tareas completadas**

**Boris Arriagada (IOC-008 - Comparativas):**

- Frontend: 7 tareas (FE-TASK-24 a FE-TASK-30) ‚úÖ
- Backend: 10 tareas (BE-TASK-30 a BE-TASK-39) ‚úÖ
- Testing: 3 tareas (TEST-TASK-04 a TEST-TASK-05) ‚úÖ
- DevOps: 1 tarea (OPS-TASK-02) ‚úÖ
- **Total: 21 tareas completadas** (TEST-TASK-06 reasignado a Jaime)

**üü¢ Carga Balanceada:** Rebalanceo efectivo de tareas mejor√≥ la distribuci√≥n

---

## Riesgos y Dependencias

### Dependencias T√©cnicas

1. **Metabase - Sistema de Filtros Parametrizados**
   
   - **Impacto:** Cr√≠tico para IOC-012
   - **Estado:** ‚úÖ **Completado** - Integraci√≥n exitosa con `locked_parameters` en JWT
   - **Resultado:** Filtros din√°micos funcionando correctamente con Metabase

2. **Apache POI y Flying Saucer (Librer√≠as de Exportaci√≥n)**
   
   - **Impacto:** Alto para IOC-008
   - **Estado:** ‚úÖ **Completado** - Spike t√©cnico exitoso, generaci√≥n de PDFs y Excel funcionando
   - **Resultado:** Exportaci√≥n completada en < 5 segundos para archivos de hasta 1000 filas

3. **Rendimiento de Queries Agregadas**
   
   - **Impacto:** Alto para IOC-008
   - **Estado:** ‚úÖ **Completado** - √çndices compuestos implementados, cach√© funcionando
   - **Resultado:** 98% de queries < 3 segundos (super√≥ objetivo del 95%)

4. **Integraci√≥n con Dashboard Existente (IOC-006)**
   
   - **Impacto:** Cr√≠tico para IOC-012
   - **Estado:** ‚úÖ **Completado** - Sin regresiones detectadas
   - **Resultado:** Dashboard base funciona correctamente con y sin filtros

5. **Dependencia entre Historias**
   
   - **Estado:** ‚úÖ **Completado** - Desarrollo paralelo exitoso, integraci√≥n sin conflictos

---

### Riesgos - Estado Final

#### üü¢ Riesgos Mitigados Exitosamente

1. **Complejidad de Integraci√≥n de Filtros con Metabase JWT**
   
   - **Estado:** ‚úÖ **Resuelto** - Spike t√©cnico del d√≠a 1 confirm√≥ viabilidad
   - **Resultado:** Implementaci√≥n exitosa, no fue necesario Plan B

2. **Generaci√≥n de PDFs con Gr√°ficos Complejos**
   
   - **Estado:** ‚úÖ **Resuelto** - Flying Saucer funcion√≥ como esperado despu√©s del spike
   - **Resultado:** PDFs generados con gr√°ficos correctamente renderizados

3. **Performance de Queries con M√∫ltiples Agregaciones**
   
   - **Estado:** ‚úÖ **Resuelto** - √çndices y cach√© lograron performance √≥ptima
   - **Resultado:** 98% de queries < 3 segundos (super√≥ meta del 95%)

4. **Inconsistencia de Datos en Cach√© vs Datos Reales**
   
   - **Estado:** ‚úÖ **Mitigado** - Bot√≥n "Refrescar" y timestamp de actualizaci√≥n implementados
   - **Resultado:** Usuarios informados del tiempo de cach√©, sin quejas

5. **Validaci√≥n Insuficiente de Filtros Genera Errores en Metabase**
   
   - **Estado:** ‚úÖ **Resuelto** - Validaci√≥n exhaustiva en frontend y backend
   - **Resultado:** 0 errores de validaci√≥n en testing QA

---

## Definition of Ready (DoR) - Verificaci√≥n Final

### IOC-008: Comparar Desempe√±o entre Entidades

‚úÖ **Historia de Usuario Completa:** Cumplida  
‚úÖ **Criterios de Aceptaci√≥n Definidos:** 4 criterios verificados  
‚úÖ **Dependencias Identificadas:** Todas resueltas  
‚úÖ **Estimaci√≥n Completada:** 13 SP entregados  
‚úÖ **Dise√±o y Assets Disponibles:** Implementados seg√∫n dise√±os

### IOC-012: Filtrar Datos del Dashboard

‚úÖ **Historia de Usuario Completa:** Cumplida  
‚úÖ **Criterios de Aceptaci√≥n Definidos:** 5 criterios verificados  
‚úÖ **Dependencias Identificadas:** Todas resueltas  
‚úÖ **Estimaci√≥n Completada:** 8 SP entregados  
‚úÖ **Dise√±o y Assets Disponibles:** Implementados seg√∫n dise√±os

---

## Definition of Done (DoD) - Checklist por Historia

### IOC-008: Comparar Desempe√±o entre Entidades

**1. C√≥digo Completado y Revisado:**

- [x] P√°gina `ComparativeDashboardPage.tsx` implementada y funcionando
- [x] Hook `useComparative()` con manejo completo de estado
- [x] `AnalyticsController` y `ComparativeAnalyticsService` implementados
- [x] `ReportExportService` generando PDFs y Excel correctamente
- [x] Pull Request creado y aprobado por 1+ reviewer (Jaime revis√≥ c√≥digo de Boris)
- [x] Merge a `main` completado sin conflictos

**2. Tests Implementados y Pasando:**

- [x] Tests unitarios para `ComparativeAnalyticsService` (cobertura 78%)
- [x] Tests de integraci√≥n para `AnalyticsController` (casos v√°lidos, inv√°lidos, l√≠mite)
- [x] Tests para `ReportExportService` (generaci√≥n de PDF/Excel)
- [x] Test E2E con Playwright: flujo completo de comparativa + exportaci√≥n
- [x] Todos los tests pasan en CI/CD pipeline

**3. Documentaci√≥n Actualizada:**

- [x] `/docs/api-endpoints.md` actualizado con nuevos endpoints de comparativas y exportaci√≥n
- [x] `/docs/user-guide-filters-comparatives.md` creado con gu√≠a de usuario y capturas
- [x] C√≥digo comentado en secciones complejas (algoritmos de agregaci√≥n, generaci√≥n de PDFs)
- [x] README actualizado con instrucciones de instalaci√≥n de Apache POI/Flying Saucer

**4. Sin Errores de Linting:**

- [x] ESLint sin errores en c√≥digo frontend
- [x] TypeScript compilando sin errores
- [x] Checkstyle/Spotless sin errores en c√≥digo backend Java
- [x] C√≥digo formateado seg√∫n est√°ndares del proyecto (Prettier para TS, Google Java Style)

**5. Validaci√≥n de QA Completada:**

- [x] Funcionalidad testeada manualmente en staging
- [x] Los 4 criterios de aceptaci√≥n verificados y documentados
- [x] Performance validada: queries < 3 segundos en 98% de casos
- [x] Exports (PDF/Excel) validados: descarga exitosa, formato correcto, metadatos incluidos
- [x] UX/UI aprobado por Product Owner (Boris)
- [x] Probado en Chrome, Firefox y Safari

---

### IOC-012: Filtrar Datos del Dashboard

**1. C√≥digo Completado y Revisado:**

- [x] Componente `DashboardFilters.tsx` implementado con validaci√≥n
- [x] Hook `useFilters()` con l√≥gica de persistencia en localStorage
- [x] `FilterController` y `FilterService` implementados en backend
- [x] Integraci√≥n con `DashboardEmbed.tsx` funcionando (filtros pasan a Metabase)
- [x] Pull Request creado y aprobado por 1+ reviewer (Boris revis√≥ c√≥digo de Jaime)
- [x] Merge a `main` completado sin conflictos

**2. Tests Implementados y Pasando:**

- [x] Tests unitarios para `FilterService` con verificaci√≥n de cach√© (cobertura 82%)
- [x] Tests de integraci√≥n para `FilterController` (endpoints GET de l√≠neas/talleres)
- [x] Test E2E con Playwright: aplicar filtros ‚Üí verificar actualizaci√≥n ‚Üí limpiar filtros
- [x] Todos los tests pasan en CI/CD pipeline

**3. Documentaci√≥n Actualizada:**

- [x] `/docs/api-endpoints.md` actualizado con endpoints de filtros
- [x] `/docs/user-guide-filters-comparatives.md` con secci√≥n de filtros y screenshots
- [x] C√≥digo comentado en hook `useFilters()` (l√≥gica de persistencia)
- [x] README actualizado

**4. Sin Errores de Linting:**

- [x] ESLint sin errores en c√≥digo frontend
- [x] TypeScript compilando sin errores
- [x] Checkstyle/Spotless sin errores en c√≥digo backend Java
- [x] C√≥digo formateado seg√∫n est√°ndares del proyecto

**5. Validaci√≥n de QA Completada:**

- [x] Funcionalidad testeada manualmente en staging
- [x] Los 5 criterios de aceptaci√≥n verificados (incluyendo autocompletado)
- [x] Validaci√≥n de fechas funcionando correctamente (mensajes de error claros)
- [x] Persistencia de filtros validada (recargar p√°gina mantiene filtros)
- [x] Mensaje "No hay datos" aparece correctamente cuando filtros no arrojan resultados
- [x] UX/UI aprobado por Product Owner (Boris)
- [x] Probado en Chrome, Firefox y Safari

---

## Calendario del Sprint (3 Semanas)

### Semana 1: Fundaci√≥n y Spikes (6 - 10 Octubre)

**Lunes 6 Oct:**

- ‚úÖ Sprint Planning (2 horas): Refinamiento de historias, compromiso del equipo
- ‚úÖ **Spike IOC-012:** Jaime valid√≥ integraci√≥n de filtros con Metabase JWT (4 horas) - Exitoso
- ‚úÖ **Spike IOC-008:** Boris valid√≥ generaci√≥n de PDF con Flying Saucer (3 horas) - Exitoso
- ‚úÖ Daily Standup (15 min)

**Martes 7 Oct:**

- ‚úÖ Decisi√≥n Go/No-Go sobre spikes (9:00 AM) - Ambos aprobados
- ‚úÖ Jaime inici√≥ FE-TASK-18, FE-TASK-19
- ‚úÖ Boris inici√≥ FE-TASK-24, FE-TASK-25
- ‚úÖ Daily Standup (15 min)

**Mi√©rcoles 8 Oct:**

- ‚úÖ Jaime: Complet√≥ frontend de filtros (FE-TASK-20, FE-TASK-21)
- ‚úÖ Boris: Complet√≥ frontend de comparativas (FE-TASK-26, FE-TASK-27)
- ‚úÖ Daily Standup (15 min)

**Jueves 9 Oct:**

- ‚úÖ Jaime: Backend de filtros (BE-TASK-25, BE-TASK-26, BE-TASK-27)
- ‚úÖ Boris: Backend de comparativas (BE-TASK-30, BE-TASK-31, BE-TASK-32)
- ‚úÖ Daily Standup (15 min)

**Viernes 10 Oct:**

- ‚úÖ Jaime: Finaliz√≥ integraci√≥n frontend-backend IOC-012 (FE-TASK-22, FE-TASK-23)
- ‚úÖ Boris: Backend de exportaci√≥n (BE-TASK-33, BE-TASK-34, BE-TASK-35)
- ‚úÖ Daily Standup (15 min)
- ‚úÖ **Checkpoint:** Ambas historias con funcionalidad b√°sica E2E funcionando

---

### Semana 2: Implementaci√≥n Core (13 - 17 Octubre)

**Lunes 13 Oct:**

- ‚úÖ Jaime: Validaciones y casos edge IOC-012 (BE-TASK-28, BE-TASK-29)
- ‚úÖ Boris: Optimizaciones de performance IOC-008 (BE-TASK-36, BE-TASK-37, BE-TASK-38)
- ‚úÖ Daily Standup (15 min)

**Martes 14 Oct:**

- ‚úÖ Jaime: Comenz√≥ testing IOC-012 (TEST-TASK-01, TEST-TASK-02)
- ‚úÖ Boris: Logging y m√©tricas IOC-008 (BE-TASK-39)
- ‚úÖ Daily Standup (15 min)

**Mi√©rcoles 15 Oct:**

- ‚úÖ Jaime: Finaliz√≥ testing y cre√≥ PR para IOC-012 (TEST-TASK-03)
- ‚úÖ Boris: Frontend final de IOC-008 (FE-TASK-28, FE-TASK-29, FE-TASK-30)
- ‚úÖ Daily Standup (15 min)
- ‚úÖ **Mid-Sprint Review:** Demo interna de IOC-012 - Feedback positivo

**Jueves 16 Oct:**

- ‚úÖ Jaime: Code review del PR de Boris para IOC-008 - Aprobado con comentarios menores
- ‚úÖ Boris: Testing IOC-008 (TEST-TASK-04, TEST-TASK-05)
- ‚úÖ Daily Standup (15 min)

**Viernes 17 Oct:**

- ‚úÖ Jaime: DevOps y documentaci√≥n (OPS-TASK-01, DOC-TASK-01, TEST-TASK-06)
- ‚úÖ Boris: Finaliz√≥ testing y cre√≥ PR para IOC-008
- ‚úÖ Daily Standup (15 min)
- ‚úÖ **Checkpoint:** Ambas historias pasan tests, PRs listos para merge

---

### Semana 3: Testing, Refinamiento y Cierre (20 - 24 Octubre)

**Lunes 20 Oct:**

- ‚úÖ Equipo: Merge de ambos PRs a `main`
- ‚úÖ Equipo: Testing de regresi√≥n completo (sin regresiones detectadas)
- ‚úÖ Daily Standup (15 min)

**Martes 21 Oct:**

- ‚úÖ Equipo: Testing en staging, validaci√≥n de criterios de aceptaci√≥n
- ‚úÖ Jaime: Ajuste menor en validaci√≥n de fechas en IOC-012
- ‚úÖ Boris: Optimizaci√≥n menor en generaci√≥n de PDFs (renderizado de gr√°ficos)
- ‚úÖ Daily Standup (15 min)

**Mi√©rcoles 22 Oct:**

- ‚úÖ Equipo: Finaliz√≥ documentaci√≥n (DOC-TASK-02, ajustes en DOC-TASK-01)
- ‚úÖ Boris (PO): Valid√≥ que ambas historias cumplen DoD
- ‚úÖ Daily Standup (15 min)

**Jueves 23 Oct:**

- ‚úÖ Equipo: Preparaci√≥n de Sprint Review (slides, demo environment)
- ‚úÖ Equipo: Testing final en producci√≥n (smoke tests) - Todo funcional
- ‚úÖ Daily Standup (15 min)

**Viernes 24 Oct:**

- ‚úÖ **Sprint Review** (1.5 horas): Demo a stakeholders - Feedback excelente
- ‚úÖ **Sprint Retrospective** (1 hora): Sesi√≥n productiva, lecciones documentadas
- ‚úÖ Deployment final a producci√≥n

---

## M√©tricas y Objetivos del Sprint

### Objetivos de Performance

| M√©trica                                 | Objetivo                                | Resultado Obtenido                                     | Estado |
| --------------------------------------- | --------------------------------------- | ------------------------------------------------------ | ------ |
| **Tiempo de respuesta de filtros**      | < 2 segundos en 95% de casos            | 1.4 segundos promedio, 97% < 2 segundos                | ‚úÖ      |
| **Tiempo de respuesta de comparativas** | < 3 segundos en 95% de casos            | 2.1 segundos promedio, 98% < 3 segundos                | ‚úÖ      |
| **Tiempo de generaci√≥n de exports**     | < 5 segundos para archivos < 1000 filas | 3.8 segundos promedio para 1000 filas                  | ‚úÖ      |
| **Cobertura de tests**                  | > 70% en c√≥digo nuevo                   | 78% IOC-008, 82% IOC-012 (promedio 80%)                | ‚úÖ      |
| **Bugs en producci√≥n post-release**     | 0 bugs cr√≠ticos en primeros 7 d√≠as      | 0 bugs cr√≠ticos, 2 bugs menores (UI) corregidos en 24h | ‚úÖ      |

### M√©tricas de Calidad

| Aspecto            | Objetivo                                      | Resultado                          | Estado |
| ------------------ | --------------------------------------------- | ---------------------------------- | ------ |
| **Code Review**    | 100% del c√≥digo revisado por par              | 100% revisado y aprobado           | ‚úÖ      |
| **Linting**        | 0 errores de ESLint/Checkstyle                | 0 errores en producci√≥n            | ‚úÖ      |
| **Documentaci√≥n**  | 100% de endpoints documentados                | Documentaci√≥n completa y detallada | ‚úÖ      |
| **Accesibilidad**  | Componentes de filtros navegables por teclado | Navegaci√≥n por teclado funcional   | ‚úÖ      |
| **Compatibilidad** | Funciona en Chrome, Firefox, Safari           | Funciona en los 3 navegadores      | ‚úÖ      |

### Definici√≥n de √âxito del Sprint

‚úÖ **Ambas historias (IOC-008 y IOC-012) cumplen Definition of Done**  
‚úÖ **Sprint Goal alcanzado:** Dashboard interactivo con filtros y comparativas funcionando  
‚úÖ **Sin regresiones:** Funcionalidades del Sprint 1 siguen operando correctamente  
‚úÖ **Performance dentro de objetivos:** M√©tricas de tiempo de respuesta cumplidas y superadas  
‚úÖ **Stakeholders satisfechos:** Feedback excelente en Sprint Review

**üéâ SPRINT 2 COMPLETADO EXITOSAMENTE**

---

## Lecciones Aprendidas

### ‚úÖ Qu√© Funcion√≥ Bien

**Spikes T√©cnicos al Inicio:**

- Los spikes del d√≠a 1 (Metabase JWT y Flying Saucer) fueron fundamentales para reducir incertidumbre
- Permitieron tomar decisiones informadas tempranamente
- Evitaron retrabajos y cambios de direcci√≥n a mitad del sprint

**Desarrollo Paralelo:**

- Trabajar ambas historias (IOC-008 y IOC-012) en paralelo aceler√≥ el progreso
- Jaime y Boris pudieron colaborar sin bloqueos significativos
- La integraci√≥n final fue fluida gracias a comunicaci√≥n constante

**Code Reviews Tempranas:**

- Revisiones de c√≥digo frecuentes detectaron problemas antes de QA
- Pair programming ocasional en tareas complejas (ej. ReportExportService) fue muy efectivo
- Feedback constructivo mejor√≥ la calidad del c√≥digo

**Rebalanceo de Carga:**

- Reasignar TEST-TASK-06 y DOC-TASK-02 a Jaime equilibr√≥ la carga de trabajo
- Boris pudo enfocarse mejor en tareas de backend complejas

**Buffer del 30%:**

- El buffer fue crucial para manejar la curva de aprendizaje de Apache POI y Flying Saucer
- Permiti√≥ tiempo adicional para optimizaciones de performance sin presi√≥n

### üìù Qu√© Mejorar

**Testing Manual Pre-Merge:**

- Necesitamos m√°s tiempo de testing manual antes de hacer merge a `main`
- Los bugs menores de UI descubiertos post-merge podr√≠an haberse detectado antes
- **Acci√≥n:** A√±adir checklist de testing manual obligatorio antes de PR

**Documentaci√≥n de Metabase:**

- La integraci√≥n con Metabase JWT requiere mejor documentaci√≥n interna
- Perdimos 2 horas en el spike buscando documentaci√≥n oficial dispersa
- **Acci√≥n:** Crear wiki interno con ejemplos de uso de Metabase para futuros sprints

**Estimaci√≥n de Exportaci√≥n de PDFs:**

- Subestimamos ligeramente la complejidad de renderizar gr√°ficos en PDFs (estimado 3h, real 5h)
- No afect√≥ el sprint por el buffer, pero es una lecci√≥n para futuras estimaciones
- **Acci√≥n:** Considerar 1.5x el tiempo estimado para integraciones con librer√≠as nuevas

**Comunicaci√≥n con Stakeholders:**

- El mid-sprint review fue valioso, deber√≠amos hacerlo est√°ndar
- Stakeholders apreciaron ver el progreso antes del final
- **Acci√≥n:** Institucionalizar mid-sprint demo para sprints de 3 semanas

### üí° Ideas para Pr√≥ximos Sprints

**Automatizaci√≥n de Tests E2E:**

- Aumentar cobertura de tests E2E con Playwright para reducir testing manual
- Considerar tests visuales (Playwright visual comparison) para detectar regresiones de UI
- **Propuesta:** Dedicar 1 d√≠a en Sprint 3 para expandir suite de tests E2E

**Biblioteca de Componentes Reutilizables:**

- Los componentes de filtros (DashboardFilters.tsx) son reutilizables
- Crear Storybook con componentes documentados facilitar√≠a futuros desarrollos
- **Propuesta:** Iniciar biblioteca de componentes en Sprint 3

**Feature Flags:**

- Implementar feature flags (ej. LaunchDarkly, Unleash) para releases m√°s seguras
- Permitir√≠a activar/desactivar funcionalidades en producci√≥n sin redeploy
- **Propuesta:** Investigar herramientas de feature flags para Sprint 4

**M√©tricas en Tiempo Real:**

- Dashboards de Micrometer funcionaron bien, pero podr√≠an ser m√°s visuales
- Considerar Grafana + Prometheus para monitoreo en tiempo real
- **Propuesta:** Spike de Grafana en Sprint 3 (4 horas)

**Pair Programming M√°s Frecuente:**

- Las sesiones de pair programming en tareas complejas fueron muy productivas
- Considerar programar sesiones regulares de pair programming (2-3 veces por semana)
- **Propuesta:** A√±adir slots de pair programming en el calendario del sprint

---

#### Ap√©ndices

### A. Stack Tecnol√≥gico del Sprint

#### Frontend

| Categor√≠a          | Tecnolog√≠a      | Versi√≥n | Prop√≥sito                                    |
| ------------------ | --------------- | ------- | -------------------------------------------- |
| **Framework**      | React           | 19.0.0  | Framework UI principal con Server Components |
| **Lenguaje**       | TypeScript      | 5.7.2   | Desarrollo type-safe                         |
| **Build Tool**     | Vite            | 6.1.0   | Bundler y dev server ultra-r√°pido            |
| **Routing**        | React Router    | 7.9.1   | Navegaci√≥n SPA con data loaders              |
| **HTTP Client**    | Axios           | 1.12.2  | Cliente HTTP con interceptores               |
| **Formularios**    | React Hook Form | 7.65.0  | Manejo performante de formularios            |
| **Validaci√≥n**     | Zod             | 4.1.12  | Schemas de validaci√≥n type-safe              |
| **UI Framework**   | Tailwind CSS    | 4.0.8   | Framework CSS utility-first                  |
| **Componentes UI** | Headless UI     | -       | Componentes accesibles sin estilos           |
| **Gr√°ficos**       | Recharts        | -       | Librer√≠a de gr√°ficos para React              |
| **Testing E2E**    | Playwright      | -       | Automatizaci√≥n de tests end-to-end           |

#### Backend

| Categor√≠a             | Tecnolog√≠a             | Versi√≥n | Prop√≥sito                           |
| --------------------- | ---------------------- | ------- | ----------------------------------- |
| **Framework**         | Spring Boot            | 3.5.5   | Framework empresarial Java          |
| **Lenguaje**          | Java                   | 21      | LTS con mejoras de rendimiento      |
| **Build Tool**        | Maven                  | -       | Gesti√≥n de dependencias             |
| **Seguridad**         | Spring Security        | 6.2     | Autenticaci√≥n y autorizaci√≥n        |
| **ORM**               | Spring Data JPA        | -       | Abstracci√≥n de base de datos        |
| **Base de Datos**     | PostgreSQL             | 15      | Base de datos relacional (Supabase) |
| **Validaci√≥n JWT**    | OAuth2 Resource Server | -       | Validaci√≥n de tokens Supabase       |
| **Exportaci√≥n Excel** | Apache POI             | 5.2.3   | Generaci√≥n de archivos Excel        |
| **Exportaci√≥n PDF**   | Flying Saucer          | 9.1.22  | Generaci√≥n de archivos PDF          |
| **Circuit Breaker**   | Resilience4j           | -       | Resiliencia y tolerancia a fallos   |
| **Cach√©**             | Caffeine               | 3.1.8   | Sistema de cach√© en memoria         |
| **M√©tricas**          | Micrometer             | 1.12    | Observabilidad y m√©tricas           |

#### DevOps

| Categor√≠a           | Tecnolog√≠a     | Prop√≥sito                                                                                              |
| ------------------- | -------------- | ------------------------------------------------------------------------------------------------------ |
| **CI/CD**           | GitHub Actions | Integraci√≥n y despliegue continuo                                                                      |
| **Contenedores**    | Docker         | Empaquetado de aplicaciones                                                                            |
| **Frontend Deploy** | Vercel         | Despliegue y hosting de frontend                                                                       |
| **Backend Deploy**  | Render         | Despliegue y hosting de backend ([https://ioc-backend.onrender.com](https://ioc-backend.onrender.com)) |

---

### ### B. Modelo de Datos Relevante

#### Tablas Utilizadas

**fact_production** - Tabla principal de hechos de producci√≥n:

```sql
CREATE TABLE fact_production (
  id BIGINT PRIMARY KEY,
  fecha_contabilizacion DATE NOT NULL,
  maquina_fk BIGINT REFERENCES dim_maquina(id),
  maquinista_fk BIGINT REFERENCES dim_maquinista(id),
  numero_log BIGINT,
  hora_contabilizacion TIME,
  fecha_notificacion DATE,
  documento BIGINT,
  material_sku BIGINT,
  material_descripcion VARCHAR(500),
  numero_pallet INTEGER,
  cantidad DECIMAL(15,3),
  peso_neto DECIMAL(15,3),
  lista VARCHAR(50),
  version_produccion VARCHAR(50),
  centro_costos VARCHAR(50),
  turno VARCHAR(50),
  jornada VARCHAR(50),
  usuario_sap VARCHAR(100),
  bodeguero VARCHAR(100),
  status_origen VARCHAR(50)
);
```

**dim_maquina** - Dimensi√≥n de l√≠neas de producci√≥n:

```sql
CREATE TABLE dim_maquina (
  id BIGINT PRIMARY KEY,
  codigo_maquina VARCHAR(50) UNIQUE NOT NULL,
  nombre_maquina VARCHAR(200),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ
);
```

**dim_maquinista** - Dimensi√≥n de operadores/maquinistas:

```sql
CREATE TABLE dim_maquinista (
  id BIGINT PRIMARY KEY,
  codigo_maquinista BIGINT UNIQUE NOT NULL,
  nombre_completo VARCHAR(200),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ
);
```

**plantas** - Cat√°logo de plantas/talleres:

```sql
CREATE TABLE plantas (
  id INTEGER PRIMARY KEY,
  code VARCHAR(50) UNIQUE NOT NULL,
  name VARCHAR(200) NOT NULL,
  address TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ
);
```

#### √çndices Implementados (Sprint 2)

**√çndice para optimizaci√≥n de filtros:**

```sql
CREATE INDEX idx_fact_production_filters 
ON fact_production(fecha_contabilizacion, maquina_fk, turno);
```

- **Prop√≥sito**: Acelerar queries de filtrado por fecha, l√≠nea y turno
- **Impacto**: Reducci√≥n de 45% en tiempo de respuesta de queries filtradas
- **Columnas**: `fecha_contabilizacion`, `maquina_fk`, `turno`

**√çndice para optimizaci√≥n de comparativas:**

```sql
CREATE INDEX idx_fact_production_comparatives
ON fact_production(turno, maquina_fk, fecha_contabilizacion);
```

- **Prop√≥sito**: Acelerar queries de comparativas entre turnos y l√≠neas
- **Impacto**: Reducci√≥n de 60% en tiempo de agregaciones
- **Columnas**: `turno`, `maquina_fk`, `fecha_contabilizacion`

**√çndice para b√∫squeda por material:**

```sql
CREATE INDEX idx_fact_production_material
ON fact_production(material_sku, fecha_contabilizacion);
```

- **Prop√≥sito**: B√∫squedas por SKU de material
- **Impacto**: Soporte para an√°lisis por producto

#### Relaciones Clave

```text
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ fact_production  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ N:1 ‚îÄ‚îÄ‚îÄ‚ñ∫ dim_maquina (l√≠neas de producci√≥n)
         ‚îÇ             ‚Ä¢ codigo_maquina
         ‚îÇ             ‚Ä¢ nombre_maquina
         ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ N:1 ‚îÄ‚îÄ‚îÄ‚ñ∫ dim_maquinista (operadores)
                       ‚Ä¢ codigo_maquinista
                       ‚Ä¢ nombre_completo

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   app_users      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ N:1 ‚îÄ‚îÄ‚îÄ‚ñ∫ plantas (talleres)
                       ‚Ä¢ code
                       ‚Ä¢ name
```

#### M√©tricas Calculadas (IOC-008)

**Producci√≥n Total:**

```sql
SUM(cantidad) 
FROM fact_production
WHERE fecha_contabilizacion BETWEEN ? AND ?
GROUP BY turno/maquina_fk
```

**Eficiencia Promedio:**

```sql
AVG(
  CASE 
    WHEN cantidad > 0 THEN (cantidad / meta_diaria * 100)
    ELSE 0 
  END
) 
FROM fact_production
WHERE fecha_contabilizacion BETWEEN ? AND ?
GROUP BY turno/maquina_fk
```

**Total de Defectos:**

```sql
COUNT(*) 
FROM fact_production
WHERE status_origen = 'DEFECTO'
  AND fecha_contabilizacion BETWEEN ? AND ?
GROUP BY turno/maquina_fk
```

#### Optimizaciones Aplicadas

**Cach√© de Resultados (Caffeine):**

- **TTL**: 8 minutos
- **Capacidad**: 100 entradas
- **Estrategia**: Cache-aside (query primero cach√©, luego BD)
- **Invalidaci√≥n**: Por timeout (TTL) o manualmente en cargas ETL

**Connection Pooling (PostgreSQL/Supabase):**

- **Pool Size**: 10 conexiones
- **Idle Timeout**: 10 minutos
- **Max Lifetime**: 30 minutos
- **Connection Timeout**: 5 segundos

**Query Optimizations:**

- Uso de √≠ndices compuestos
- Agregaciones en BD (no en memoria)
- LIMIT aplicado en queries de listado
- Paginaci√≥n en endpoints de administraci√≥n

## Firma de Compromiso del Sprint

**Equipo de Desarrollo:**

- [x] Boris Arriagada - Development Team
- [x] Jaime Vicencio - Development Team

**Acuerdo:** El equipo se compromete a entregar las 2 historias (21 SP) cumpliendo el Definition of Done y alcanzando el Sprint Goal de transformar el dashboard en una herramienta interactiva de an√°lisis.

**Fecha de Compromiso:** 6 de Octubre, 2025  
**Sprint Review Programada:** 24 de Octubre, 2025 - 18:00 hrs

---

## üéâ SPRINT 2 - FINALIZADO CON √âXITO

**Resumen Ejecutivo:**

El Sprint 2 "Desatando la Interactividad Anal√≠tica" ha sido completado exitosamente, entregando un dashboard completamente interactivo con capacidades de filtrado din√°mico y an√°lisis comparativo. Ambas historias de usuario (IOC-008 y IOC-012) cumplen con todos los criterios de aceptaci√≥n y Definition of Done.

**Logros Destacados:**

- ‚úÖ 21 Story Points completados (100% del compromiso)
- ‚úÖ 38 tareas t√©cnicas finalizadas
- ‚úÖ Performance super√≥ objetivos (98% de queries < 3 segundos)
- ‚úÖ Cobertura de tests: 80% (super√≥ meta del 70%)
- ‚úÖ 0 bugs cr√≠ticos en producci√≥n
- ‚úÖ Feedback excelente de stakeholders en Sprint Review

**Pr√≥ximos Pasos:**

El equipo est√° listo para comenzar el Sprint 3 con las siguientes historias priorizadas:

- IOC-002: Validar datos cargados autom√°ticamente
- IOC-003: Gestionar Usuarios, Roles y Permisos
- IOC-019: Gestionar Gr√°ficos del Dashboard
- IOC-020: Dise√±ar Disposici√≥n del Dashboard

**Fecha de Inicio Sprint 3:** 27 de Octubre, 2025
