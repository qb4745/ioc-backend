# Registro de Impedimentos del Sprint 2 (v3.0)

**Proyecto:** IOC (Indicadores Operacionales Cambiaso)  
**Sprint:** Sprint 2 - Interactividad Anal√≠tica  
**Per√≠odo:** 6 Octubre - 24 Octubre 2025 (15 d√≠as laborables, sin festivos)  
**Equipo:**

- Boris Arriagada (Product Owner + Developer)
- Jaime Vicencio (Scrum Master + Developer)

---

## üìä Estado Actual

| M√©trica                           | Valor          |
| --------------------------------- | -------------- |
| **Total de Impedimentos**         | 4              |
| **Resueltos**                     | 4 (100%)       |
| **Pendientes**                    | 0              |
| **Tiempo Promedio de Resoluci√≥n** | 1.1 d√≠as       |
| **Impedimentos Cr√≠ticos**         | 1 (IMP-S2-019) |
| **Impedimentos de Alto Impacto**  | 2              |
| **Impedimentos de Impacto Medio** | 1              |

---

## Proceso de Gesti√≥n de Impedimentos

1. **Identificaci√≥n:** Cualquier miembro del equipo reporta el impedimento en la Daily Scrum.
2. **Clasificaci√≥n:** Se asigna ID, impacto (üî¥ Cr√≠tico / üü° Alto / üü¢ Medio) y responsable.
3. **An√°lisis:** Se define plan de acci√≥n, causa ra√≠z y acci√≥n preventiva.
4. **Seguimiento:** El estado se actualiza diariamente hasta su resoluci√≥n.
5. **Cierre:** Se documenta la soluci√≥n y se calcula el tiempo de resoluci√≥n.

---

## üìã Registro de Impedimentos Resueltos

| ID             | Impacto    | Impedimento                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Responsable | Detectado | Resuelto | D√≠as | Soluci√≥n Aplicada                                                                                                                                                                                                                                                                                                                                                                                                                                            | Causa Ra√≠z                                                                                                                                                                                                                                                                                                         | Acci√≥n Preventiva                                                                                                                                                                                                                                                                                     |
|:-------------- |:----------:|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |:----------- |:---------:|:--------:|:----:|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **IMP-S2-017** | üü° Alto    | **CORS bloqueando nuevos endpoints de filtros:** Al implementar `/api/v1/filters/lines` y `/api/v1/filters/workshops` (BE-TASK-25, BE-TASK-26), el frontend recib√≠a errores CORS bloqueando las peticiones desde `http://localhost:5173`.                                                                                                                                                                                                                                                           | Jaime       | 7-Oct     | 7-Oct    | <1   | Actualizar `CorsConfig.java` para incluir patr√≥n `/api/v1/**` en lugar de endpoints espec√≠ficos. Verificar que todos los endpoints futuros est√©n cubiertos. Testing en ambiente local y desarrollo.                                                                                                                                                                                                                                                          | **Configuraci√≥n CORS Restrictiva:** La configuraci√≥n solo contemplaba endpoints existentes del Sprint 1. Los nuevos endpoints de filtros no estaban en la whitelist, causando bloqueo en peticiones cross-origin.                                                                                                  | **Configuraci√≥n CORS Flexible:** Usar patrones gen√©ricos (`/api/v1/**`) en lugar de endpoints espec√≠ficos para evitar problemas con nuevos endpoints. Incluir verificaci√≥n CORS en testing de integraci√≥n frontend-backend.                                                                           |
| **IMP-S2-018** | üü¢ Medio   | **Warnings React en Combobox de Headless UI:** Durante la implementaci√≥n de FE-TASK-19 (Combobox de Headless UI para autocompletado de L√≠nea), React emit√≠a warnings: "Each child in a list should have a unique key prop". El c√≥digo usaba el √≠ndice del array como `key` en el mapeo de opciones del Combobox.                                                                                                                                                                                    | Jaime       | 9-Oct     | 9-Oct    | <1   | Reemplazar `key={index}` por `key={line.id}` (ID √∫nico). Revisar otros componentes con listas (FE-TASK-26, FE-TASK-27) para evitar mismo anti-patr√≥n. Documentar best practice en gu√≠a de estilo.                                                                                                                                                                                                                                                            | **Anti-patr√≥n de Keys en React:** Uso del √≠ndice del array como `key` en lugar de IDs √∫nicos. Esto es un anti-patr√≥n conocido que puede causar problemas de renderizado y comportamiento inconsistente en listas din√°micas.                                                                                        | **Definici√≥n de Est√°ndares:** Configurar ESLint rule `react/no-array-index-key` para detectar autom√°ticamente este anti-patr√≥n en code reviews. Revisar c√≥digo en pull requests espec√≠ficamente para verificar uso correcto de keys en listas.                                                        |
| **IMP-S2-019** | üî¥ Cr√≠tico | **Performance inaceptable en queries de comparaci√≥n (Riesgo R-003):** Al implementar BE-TASK-30 (AnalyticsController con endpoint `/api/v1/analytics/compare`), las queries de comparaci√≥n entre turnos/l√≠neas tardaban >8 segundos con datasets de 3 meses, superando el Criterio de Aceptaci√≥n de IOC-008 (<3 segundos). Queries con m√∫ltiples GROUP BY y JOIN en `fact_production` (>500k registros) sin √≠ndices en columnas `date`, `line_id`, `shift_id`, y sin cach√© de resultados agregados. | Boris       | 14-Oct    | 16-Oct   | 2    | **D√≠a 1 (14-Oct):** An√°lisis EXPLAIN PLAN de queries lentas y dise√±o de √≠ndice compuesto √≥ptimo. **D√≠a 2 (15-Oct):** Crear √≠ndice en BD desarrollo: `CREATE INDEX idx_fact_production_analytics ON fact_production (date, line_id, shift_id, workshop_id);` Implementar cach√© Caffeine con TTL 5min (BE-TASK-38). **D√≠a 3 (16-Oct):** Validar mejora de performance en ambiente desarrollo. Resultado: ~2.3s (cumple <3s objetivo).                          | **Cuello de Botella en Queries Agregadas:** Queries complejas con m√∫ltiples agregaciones y filtros en tabla con >500k registros sin √≠ndices optimizados. Sin cach√© de resultados agregados, cada petici√≥n ejecutaba query completa contra BD. Vinculado a Riesgo R-003 (Performance de Queries, probabilidad 40%). | **An√°lisis de Performance Proactivo:** Incluir an√°lisis EXPLAIN PLAN en Definition of Ready para historias con queries complejas. Implementar cach√© strategy est√°ndar para queries agregadas (Caffeine TTL 5min). Monitorear performance con Micrometer (BE-TASK-39). Revisar √≠ndices BD cada sprint. |
| **IMP-S2-021** | üü¢ Medio   | **Inconsistencias en localStorage de filtros aplicados:** Al implementar persistencia de filtros en `localStorage` (parte de FE-TASK-21), el estado de filtros se desincronizaba entre tabs del navegador. Al aplicar filtro en Tab A y refrescar Tab B, los filtros no se actualizaban correctamente. El hook `useFilters()` (FE-TASK-20) solo le√≠a `localStorage` en mount inicial, no escuchaba eventos `storage` para sincronizar cambios entre tabs.                                           | Jaime       | 17-Oct    | 18-Oct   | 1    | **D√≠a 1 (17-Oct PM):** Agregar listener de evento `storage` en `useFilters()` con `window.addEventListener('storage', handleStorageChange)`. **D√≠a 2 (18-Oct):** Implementar l√≥gica de sincronizaci√≥n entre tabs, testing multi-tab en Chrome/Firefox, y documentar comportamiento en gu√≠a usuario (DOC-TASK-02). Resultado: Filtros sincronizan autom√°ticamente entre tabs, badge "Filtros activos" (FE-TASK-22) refleja estado correcto en todas las tabs. | **localStorage No es Reactivo:** El API de `localStorage` no emite eventos autom√°ticamente cuando se modifica desde la misma tab. Solo emite eventos `storage` a otras tabs/ventanas. El hook `useFilters()` no implement√≥ este listener, causando desincronizaci√≥n multi-tab.                                     | **Considerar Sincronizaci√≥n Multi-Tab:** Siempre considerar sincronizaci√≥n multi-tab/multi-ventana cuando se usa `localStorage` para estado compartido. Agregar tests E2E multi-ventana (TEST-TASK-03) a la suite est√°ndar. Documentar patr√≥n de storage event listener en gu√≠a de arquitectura.      |

---

## üìä Resumen y M√©tricas

### Distribuci√≥n por Impacto

| Impacto        | Cantidad | Porcentaje | Tiempo Promedio de Resoluci√≥n |
| -------------- | -------- | ---------- | ----------------------------- |
| üî¥ **Cr√≠tico** | 1        | 25%        | 2.0 d√≠as                      |
| üü° **Alto**    | 2        | 50%        | <1 d√≠a                        |
| üü¢ **Medio**   | 1        | 25%        | 1.0 d√≠a                       |
| **TOTAL**      | **4**    | **100%**   | **1.1 d√≠as**                  |

### Velocidad de Resoluci√≥n

- **M√°s r√°pido:** IMP-S2-017, IMP-S2-018 (<1 d√≠a - mismo d√≠a, 2-4 horas)
- **M√°s lento:** IMP-S2-019 (2 d√≠as - requiri√≥ an√°lisis EXPLAIN PLAN, dise√±o de √≠ndices, implementaci√≥n cach√©, y validaci√≥n)
- **Promedio general:** 1.1 d√≠as
- **Mediana:** 1 d√≠a

### Distribuci√≥n por Responsable

| Responsable          | Impedimentos Resueltos | Porcentaje |
| -------------------- | ---------------------- | ---------- |
| **Jaime (SM + Dev)** | 3                      | 75%        |
| **Boris (PO + Dev)** | 1                      | 25%        |

### Distribuci√≥n por Categor√≠a T√©cnica

| Categor√≠a                   | Cantidad | Ejemplos                                                    |
| --------------------------- | -------- | ----------------------------------------------------------- |
| **Backend/Infraestructura** | 1        | IMP-S2-019 (Performance queries BD)                         |
| **Frontend/UI**             | 2        | IMP-S2-018 (React warnings), IMP-S2-021 (localStorage sync) |
| **Integraci√≥n**             | 1        | IMP-S2-017 (CORS)                                           |

### Evoluci√≥n Temporal

| Semana                   | Nuevos | Resueltos | Acumulados |
| ------------------------ | ------ | --------- | ---------- |
| **Semana 1** (6-10 Oct)  | 2      | 2         | 0          |
| **Semana 2** (13-17 Oct) | 2      | 1         | 1          |
| **Semana 3** (20-24 Oct) | 0      | 1         | 0          |

---

## üîó Relaci√≥n con Riesgos Mitigados del Sprint

### R-003: Performance de Queries con M√∫ltiples Agregaciones

**Estado:** ‚úÖ **MITIGADO** mediante IMP-S2-019

**Contexto del Riesgo (Sprint Backlog):**

- Probabilidad: 40%
- Impacto: Alto
- Estrategia de mitigaci√≥n planificada: √çndices compuestos + Cach√© Caffeine

**Materializaci√≥n del Riesgo:**
El riesgo R-003 se materializ√≥ como el impedimento IMP-S2-019 cuando las queries de comparaci√≥n superaron los 8 segundos, excediendo el Criterio de Aceptaci√≥n de IOC-008 (<3 segundos).

**Estrategia de Resoluci√≥n Aplicada:**

1. ‚úÖ √çndices compuestos en `fact_production` (BE-TASK-37)
2. ‚úÖ Cach√© Caffeine con TTL 5 minutos (BE-TASK-38)
3. ‚úÖ Monitoring con Micrometer (BE-TASK-39)

**Resultado:**

- Queries optimizadas: ~2.3 segundos (promedio)
- Cumple Criterio Aceptaci√≥n IOC-008: **<3 segundos** ‚úÖ
- Cach√© hit ratio: ~65% en testing
- Riesgo mitigado exitosamente

---

### R-005: Generaci√≥n de PDFs con Gr√°ficos Complejos

**Estado:** ‚úÖ **MITIGADO PROACTIVAMENTE** (NO se convirti√≥ en impedimento)

**Contexto del Riesgo (Sprint Backlog):**

- Probabilidad: 35%
- Impacto: Alto
- Estrategia de mitigaci√≥n planificada: Flying Saucer para PDFs + l√≠mite de filas

**Mitigaci√≥n Proactiva:**
El equipo implement√≥ la estrategia de mitigaci√≥n planificada desde el inicio del sprint:

1. ‚úÖ Uso de Flying Saucer 9.1.22 para PDFs desde el inicio (BE-TASK-35)
2. ‚úÖ Apache POI 5.2.3 para Excel (BE-TASK-35)
3. ‚úÖ L√≠mite m√°ximo 10,000 filas configurado (BE-TASK-36)
4. ‚úÖ Timeout 30s, heap 512MB (OPS-TASK-02)

**Resultado:**

- Exportaci√≥n de PDFs funcional con estilos corporativos
- NO se registr√≥ impedimento durante la implementaci√≥n
- La planificaci√≥n proactiva evit√≥ que R-005 se materializara como impedimento

**Lecci√≥n Aprendida:**
La mitigaci√≥n proactiva de riesgos durante Sprint Planning reduce significativamente la probabilidad de impedimentos cr√≠ticos durante el sprint.

---

## üéì Top 3 Lecciones Aprendidas

### 1. **La Mitigaci√≥n Proactiva de Riesgos Previene Impedimentos Cr√≠ticos** (R-005)

- **Impacto:** El riesgo R-005 (Generaci√≥n de PDFs) NO se convirti√≥ en impedimento gracias a la planificaci√≥n proactiva.
- **Lecci√≥n:** Invertir tiempo en Sprint Planning para identificar y mitigar riesgos t√©cnicos reduce impedimentos durante el sprint.
- **Acci√≥n:** Continuar pr√°ctica de Risk Register y estrategias de mitigaci√≥n proactivas en sprints futuros.

### 2. **El An√°lisis de Performance Debe Ser Parte del Definition of Ready** (IMP-S2-019)

- **Impacto:** El impedimento cr√≠tico de performance (>8s ‚Üí 2.3s) requiri√≥ 2 d√≠as de trabajo no planificado.
- **Lecci√≥n:** Las historias con queries complejas deben incluir an√°lisis EXPLAIN PLAN ANTES de la implementaci√≥n, no despu√©s.
- **Acci√≥n:** Actualizar Definition of Ready: "Historias con queries agregadas deben incluir an√°lisis de performance estimado y plan de √≠ndices".

### 3. **Los Patrones de Frontend Requieren Consideraci√≥n de Casos Edge** (IMP-S2-021)

- **Impacto:** localStorage sin sincronizaci√≥n multi-tab caus√≥ inconsistencias en UX.
- **Lecci√≥n:** Los patrones de estado persistente (`localStorage`, `sessionStorage`) deben considerar sincronizaci√≥n multi-tab/ventana desde el dise√±o inicial.
- **Acci√≥n:** Agregar tests E2E multi-ventana a la suite est√°ndar y documentar patr√≥n de storage event listener en gu√≠a de arquitectura frontend.

---

## üìä Comparaci√≥n con Sprint 1

| M√©trica                               | Sprint 1  | Sprint 2  | Tendencia      | An√°lisis                                                                                                                                 |
| ------------------------------------- | --------- | --------- | -------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| **Total Impedimentos**                | 16        | 4         | ‚¨áÔ∏è **-75%**    | Mejora significativa debido a mitigaci√≥n proactiva de riesgos (R-005 no se materializ√≥) y aprendizajes aplicados del Sprint 1.           |
| **Tiempo Promedio Resoluci√≥n**        | 1.2 d√≠as  | 1.1 d√≠as  | ‚¨áÔ∏è **-8%**     | Ligera mejora en velocidad de resoluci√≥n. Impedimentos simples (CORS, React warnings) se resolvieron en <1 d√≠a.                          |
| **Impedimentos Cr√≠ticos**             | 4 (25%)   | 1 (25%)   | ‚û°Ô∏è **Estable** | Mismo porcentaje, pero menor n√∫mero absoluto. IMP-S2-019 fue el √∫nico cr√≠tico, vinculado a Riesgo R-003.                                 |
| **Impedimentos de Alto Impacto**      | 6 (37.5%) | 2 (50%)   | ‚¨ÜÔ∏è **+33%**    | Aumento en porcentaje, pero menor n√∫mero absoluto (6 ‚Üí 2). IMP-S2-017 (CORS) y IMP-S2-018 (React warnings) fueron resueltos r√°pidamente. |
| **Impedimentos Prevenidos**           | 0         | 1 (R-005) | ‚¨ÜÔ∏è **Mejora**  | Primera vez que un riesgo identificado NO se convirti√≥ en impedimento gracias a mitigaci√≥n proactiva.                                    |
| **Velocidad de Resoluci√≥n (Mediana)** | 1 d√≠a     | 1 d√≠a     | ‚û°Ô∏è **Estable** | Mediana se mantiene, pero distribuci√≥n mejor√≥ (50% <1 d√≠a vs 25% <1 d√≠a en Sprint 1).                                                    |

**Conclusi√≥n de Tendencias:**

- ‚úÖ **Mejora significativa:** Reducci√≥n de 75% en impedimentos totales (16 ‚Üí 4)
- ‚úÖ **Mitigaci√≥n proactiva efectiva:** R-005 no se materializ√≥ como impedimento
- ‚úÖ **Aprendizajes aplicados:** Configuraciones m√°s robustas (CORS flexible, tests multi-tab)
- ‚ö†Ô∏è **√Årea de mejora:** El impedimento cr√≠tico IMP-S2-019 podr√≠a haberse detectado en spike t√©cnico durante Sprint Planning

---

## üìã Leyenda

### Impacto

- üî¥ **Cr√≠tico:** Bloque√≥ trabajo completamente, puso en riesgo el Sprint Goal o caus√≥ fallas del sistema.
- üü° **Alto:** Impacto significativo en la productividad o calidad, pero hab√≠a workaround temporal.
- üü¢ **Medio:** Molestia o ineficiencia que ralentiz√≥ el trabajo, pero no fue bloqueante.

### Estados

- ‚úÖ **Resuelto:** El impedimento fue completamente resuelto y la soluci√≥n fue validada.
- üîÑ **En Progreso:** Se est√° trabajando activamente en la resoluci√≥n.
- üÜï **Nuevo:** Impedimento identificado pero a√∫n no se inici√≥ el plan de acci√≥n.

### Duraci√≥n

- **<1 d√≠a:** Resuelto en el mismo d√≠a (2-4 horas t√≠picamente)
- **1 d√≠a:** Resuelto en un d√≠a laborable completo
- **2+ d√≠as:** Requiri√≥ m√∫ltiples d√≠as de trabajo (casos complejos o cr√≠ticos)

---

**√öltima actualizaci√≥n:** 24 Octubre 2025 - Post Sprint Review  
**Pr√≥xima revisi√≥n:** Sprint 3 Planning (28 Octubre 2025)

---

**Documentos relacionados:**

- Sprint Backlog: `01.-sprint_2_backlog_completado.md`
- Daily Scrum Summary: `03.-daily_scrum_summary_sprint_2_CORREGIDO.md`
- Risk Register: Secci√≥n "Riesgos Mitigados" en Sprint Backlog
